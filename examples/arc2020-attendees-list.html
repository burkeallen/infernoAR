
<!-- https://studio304nextechar.freetls.fastly.net/infernoAR/gallery2/
left pane 280
top pane 55
main pane has 15-20 padding forced on it. -->


<!-- Import Fonts -->
<script type="text/javascript">
  // Load custom fonts

  // NOTE: Helvetica Neue Regular is actually the thinnest of the fonts
  // instead thin is used for "light" in the mockups, and light for "regular" in the mockups
  var hvFontThin = new FontFace(
    'Helvetica Neue',
    'url(https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/fonts/helveticaneue/HelveticaNeueThin.woff)',
    {
      style: 'normal',
      weight: '300'
    }
  );
  hvFontThin
    .load()
    .then(loadedFont => {
      document.fonts.add(loadedFont);
    })
    .catch(error => {
      // error occurred
      console.log('Error loading Helvetica Neue thin: ', error);
    });

  var hvFontLight = new FontFace(
    'Helvetica Neue',
    'url(https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/fonts/helveticaneue/HelveticaNeueLight.woff)',
    {
      style: 'normal',
      weight: 'normal'
    }
  );
  hvFontLight
    .load()
    .then(loadedFont => {
      document.fonts.add(loadedFont);
    })
    .catch(error => {
      // error occurred
      console.log('Error loading Helvetica Neue Light: ', error);
    });

  var hvFontMedium = new FontFace(
    'Helvetica Neue',
    'url(https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/fonts/helveticaneue/HelveticaNeueMedium.woff)',
    {
      style: 'normal',
      weight: '500'
    }
  );
  hvFontMedium
    .load()
    .then(loadedFont => {
      document.fonts.add(loadedFont);
    })
    .catch(error => {
      // error occurred
      console.log('Error loading Helvetica Neue Medium: ', error);
    });

  var hvFontBold = new FontFace(
    'Helvetica Neue',
    'url(https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/fonts/helveticaneue/HelveticaNeueBold.woff)',
    {
      style: 'normal',
      weight: 'bold'
    }
  );
  hvFontBold
    .load()
    .then(loadedFont => {
      document.fonts.add(loadedFont);
    })
    .catch(error => {
      // error occurred
      console.log('Error loading Helvetica Neue Bold: ', error);
    });
</script>
<!-- ./ Import Fonts -->

<style>
  .h1,
  .h2,
  .h3,
  .h4,
  .h5,
  .h6,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: 'Helvetica Neue', sans-serif;
  }

  #ntar-bg {
    font-family: 'Helvetica Neue', sans-serif;
    font-weight: normal;
    font-style: normal;
    position: absolute;
    width: 100%;
    height: calc(100vh - 56px);
    margin: -20px;
    background-image: url("https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/background-1.png");
    background-repeat: no-repeat;
    background-position: top center;
    background-attachment: fixed;
    background-size: cover;
    background-color: #f6f6f6;
    overflow-y: auto;
    scroll-behavior: smooth;
  }

  .main {
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .banner {
    min-height: 63.6rem;
    display: flex;
    justify-content: space-between;
    padding: 1rem 4rem 4rem;
  }

  .banner-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-self: center;
  }

  #inferno-logo {
    height: 5rem;
    width: auto;
  }

  .banner-info h1 {
    font-size: 5rem;
    color: #01245B;
    font-weight: bold;
    margin: 0.5rem 0;
  }

  .banner-info p {
    font-size: 1.8rem;
    font-weight: 500;
    line-height: 3rem;
  }

  .download-links {
    display: flex;
  }

  #qr-code {
    height: 10rem;
    width: 10rem;
  }

  .store-links {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  .store-links img {
    height: 4.6rem;
    width: auto;
    margin-left: 0.5rem;
  }

  .highlight {
    color: #01245B;
  }

  #banner-image {
    width: 60rem;
    height: 60rem;
    margin: 0 1rem;
  }

  .chevron {
    width: 2.1rem;
    height: 1.2rem;
  }

  .overview-divider {
    background-color: rgba(255, 255, 255, 0.75);
    width: 100;
    padding: 3.8rem;
  }

  .overview-divider h1 {
    color: #06026D;
    font-size: 4.6rem;
    font-weight: bold;
    letter-spacing: 0;
    line-height: 5.3rem;
  }

  .menu {
    padding: 4.4rem;
  }

  .menu h1 {
    font-size: 3.5rem;
    font-weight: bold;
    color: #01245B;
  }

  .menu-items {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
  }

  .menu-item {
    margin: 2rem 0.5rem;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .menu-items img {
    width: 39rem;
    height: 50.9rem;
    box-shadow: 11px 11px 19px 0 rgba(139, 139, 139, 0.51);
  }

  hr {
    border: 1px solid rgba(11, 38, 104, 0.32);
    margin: 2.8rem 0;
  }

  .sponsors-section {
    padding: 4.4rem;
  }

  .sponsors-header {
    width: 100%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
  }

  .sponsors-header h1 {
    font-size: 3.5rem;
    font-weight: bold;
    color: #01245B;
    margin-right: 2rem;
  }

  .sponsors-header a {
    color: white;
    border-radius: 5px;
    background-color: #0B2668;
    box-shadow: 10px 10px 17px 0 rgba(139, 139, 139, 0.51);
    text-decoration: none;
    padding: 1.2rem 0;
    width: 36.4rem;
    text-align: center;
    font-size: 2rem;
    font-weight: bold;
  }

  .sponsors-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    margin: 2rem 0;
  }

  .sponsors-list img {
    width: 36.4rem;
    height: 8.6rem;
    box-shadow: 10px 10px 17px 0 rgba(139, 139, 139, 0.51);
    margin: 1rem 0;
  }

  footer {
    color: white;
    font-size: 1.6rem;
    background-color: #01193D;
    padding: 4rem;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
  }

  footer p {
    margin: 0;
  }

  footer a {
    margin: 0;
  }

  footer .info {
    display: flex;
    flex-direction: column;
    justify-content: space-between;

  }

  footer .info {
    font-weight: 500;
  }

  footer .info a {
    color: white;
    text-decoration: none;
  }

  footer .info p {
    font-size: 1.4rem;
    font-weight: 300;
  }

  .info-links {
    margin-bottom: 4rem;
  }

  .social-links-title {
    margin-bottom: 2rem;
  }

  .social-link {
    width: 4rem;
    height: 4rem;
    margin-right: 1rem;
  }


  .exhibitors-divider {
    background-color: rgba(255, 255, 255, 0.75);
    width: 100;
    padding: 3.8rem;
    padding: 4.4rem;
  }

  .exhibitors-divider h1 {
    color: #3D3D3D;
    font-size: 4.6rem;
    font-weight: bold;
    letter-spacing: 0;
    line-height: 5.3rem;
  }

  .search-exhibitors-divider {
    background-color: rgb(225, 233, 247, 0.79);
    width: 100%;
    padding: 5.8rem 0;
    display: flex;
    justify-content: center;
  }

  .filter-options {
    width: 100%;
    margin: 0 3.5rem;
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    align-items: center;
  }

  .filter-options button {
    height: 6rem;
    width: 9.8rem;
    border: 2px solid rgba(11, 38, 104, 0.32);
    border-radius: 4px;
    background-color: #FFFFFF;
    margin: 0.9rem;
    padding: 1.3rem 1.6rem;
    color: #3D3D3D;
    font-size: 2rem;
    font-weight: bold;
    letter-spacing: 0;
    line-height: 2.5rem;
    text-align: center;
  }

  .filter-options button:focus {
    outline: none;
    border: 2px solid rgba(11, 38, 104, 0.6);
  }

  .search-wrapper {
    width: 31.5rem;
    border: 2px solid rgba(11, 38, 104, 0.32);
    border-radius: 4px;
    background-color: #FFFFFF;
    margin: 0.9rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .search-wrapper input {
    padding: 1.4rem;
    color: #3D3D3D;
    font-size: 2rem;
    font-weight: bold;
    width: 75%;
    border: none;
  }

  .search-wrapper input::placeholder {
    /* Chrome, Firefox, Opera, Safari 10.1+ */
    color: #3D3D3D;
    opacity: 1;
    /* Firefox */
  }

  .search-wrapper input:-ms-input-placeholder {
    /* Internet Explorer 10-11 */
    color: #3D3D3D;
  }

  .search-wrapper input::-ms-input-placeholder {
    /* Microsoft Edge */
    color: #3D3D3D;
  }

  .search-wrapper img {
    width: 2rem;
    margin: 1.25rem;
  }

  .search-wrapper input:focus {
    outline: none;
    border: none;
  }

  .select-wrapper {
    width: 26.6rem;
    margin: 0.9rem;
    border: 2px solid rgba(11, 38, 104, 0.32);
    border-radius: 4px;
    background-color: #FFFFFF;
  }

  .select-wrapper select {
    width: 96%;
    padding: 1.4rem;
    color: #3D3D3D;
    font-size: 2rem;
    font-weight: bold;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background: url("https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/chevron.png") no-repeat right #fff;
    background-size: 8%;
    border: none;
  }

  .select-wrapper select:focus {
    outline: none;
  }

  .select-wrapper img {
    width: 2rem;
    margin: 1rem;
  }

  .attendee-list {
    padding: 5.8rem 0;
  }

  .attendee {
    margin: 1.4rem 4.4rem;
    padding: 2rem;
    border-radius: 9px;
    background-color: #FFFFFF;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;

  }

  .attendee .avatar {
    height: 15.2rem;
    width: 15.2rem;
    /* border: 2px solid #6D7278; */
    border-radius: 50%;
  }

  .attendee .details {
    margin: 0 2rem;
    flex-grow: 3;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
  }

  .attendee .details .a-row {
    display: flex;
    align-items: baseline;
  }

  .header h1 {
    font-size: 2.4rem;
    font-weight: bold;
    margin: 0;
  }

  .header h2 {
    color: #52b952;
    font-size: 1.8rem;
    font-weight: bold;
    letter-spacing: 0;
    margin: 0 1rem;
  }

  .attendee .details h4 {
    color: #313131;
    font-size: 1.8rem;
    font-weight: 500;
    letter-spacing: 0;
    line-height: 2.9rem;
    margin: 0;
    max-width: 500px;
  }

  .attendee .details a {
    color: #0B2668;
    font-size: 1.6rem;
    letter-spacing: 0;
    line-height: 2.6rem;
  }

  .attendee .details .header {
    margin: 1.5rem 0;
    display: flex;
    flex-wrap: wrap;
  }

  .attendee .details .a-footer {
    width: 100%;
    margin-top: 3rem;
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
  }

  .attendee .details .a-footer img {
    height: 1.8rem;
    width: auto;
  }

  .contact {
    margin: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .contact img {
    margin: 0 1rem;
  }

  .attendee .actions {
    display: flex;
    flex-direction: column;
    justify-content: space-evenly;
    margin: 1.5rem 0;
  }

  .attendee .actions button {
    width: 24.4rem;
    height: 4.5rem;
    border-radius: 5px;
    margin: 1rem;
    font-size: 18px;
    font-weight: bold;
    letter-spacing: 0.9px;
    line-height: 23px;
    text-align: center;
  }

  .attendee .actions button:hover {
    cursor: pointer;
    outline: none;
    border: 1px solid #0B2668;
  }

  .attendee .actions button:focus {
    outline: none;
    border: 1px solid #0B2668;
  }


  .send-message {
    color: white;
    background-color: #0B2668;
    border: 1px solid #0B2668;
  }

  .request-meeting {
    color: #0B2668;
    background-color: white;
    border: 1px solid #0B2668;
  }

  .modal {
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 2;
    width: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    flex-direction: column;
    justify-content: center;
    align-items: center;
    display: none;
  }

  .message-box {
    z-index: 3;
    display: flex;
    flex-direction: column;
    width: 90%;
    background-color: #F8F8F8;
  }

  .mb-row {
    width: 100%;
    display: flex;
  }

  .mb-actions {
    display: flex;
    align-items: flex-start;
  }

  .mb-actions .close-modal {
    background: transparent;
    border: none;
    font-size: 2rem;
  }

  .mb-actions .close-modal:hover {
    cursor: pointer;
    font-weight: bold;
  }

  .mb-actions .close-modal:focus {
    outline: none;
    border: none;
  }

  .mb-row textarea {
    resize: none;
    font-family: sans-serif;
    font-size: 1.8rem;

    margin: 2rem 0;
    padding: 1rem;

    border: 1px solid #979797;
    border-radius: 12px;

    flex-grow: 1;
    min-height: 10rem;
  }

  .mb-footer {
    width: 100%;
    display: flex;
    justify-content: flex-end;
  }

  .final-send {
    width: 24.4rem;
    height: 4.5rem;
    border-radius: 5px;
    margin: 1rem;
    font-size: 18px;
    font-weight: bold;
    letter-spacing: 0.9px;
    line-height: 23px;
    text-align: center;
    color: white;
    background-color: #0B2668;
    border: 1px solid #0B2668;
    align-self: flex-end;
  }

  .final-send:hover {
    cursor: pointer;
  }

  .final-send:disabled {
    opacity: 0.5;
  }

  .mc-row {
    display: flex;
    width: 100%;
  }

  .mc-row h1 {
    text-align: center;
    line-height: 2.9rem;
    max-width: 50rem;
  }

  .mc-flex-end {
    justify-content: flex-end;
  }

  .mc-center {
    justify-content: center;
  }

  .no-attendees-message {
    margin: 0;
    color: #0B2668;
    font-size: 2.2rem;
    font-weight: bold;
    letter-spacing: 0.092rem;
    line-height: 2.7rem;
    text-align: center;
  }
</style>

<script>

</script>

<div id="ntar-bg">
  <div id="main" class="main">
    <div class="banner">

      <div class="banner-info">
        <h1>Attendee List</h1>
        <p>
          Reach out and connect with others here. Send messages, emails, and request meetings all in one spot.
        </p>
      </div>
      <img id="banner-image"
           src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/attendees/attendee-list-hero.png" />

    </div>

    <!-- schedule divider -->

    <!-- #### schedule divider widget #### -->
    <style>
      .schedule-divider {
        width: 100%;
        background-color: rgb(1, 36, 91, 0.9);
        color: white;
        padding: 3rem 0;

        display: flex;
        justify-content: space-between;
        flex-wrap: wrap;

        z-index: 5;
      }

      .schedule-dates {
        display: flex;
        flex-direction: column;
        justify-content: center;
        margin: 1rem 4rem;
      }

      .schedule-dates h2 {
        font-size: 2.2rem;
        font-weight: bold;
        margin: 0.25rem;
        max-width: 40rem;
      }

      .schedule-dates h3 {
        font-size: 1.98rem;
        font-weight: 300;
        margin: 0.25rem;
      }

      .date-selectors {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        margin: 1rem 3rem;
      }

      .date {
        margin: 1rem;
        padding: 1.5rem;
        width: 18rem;

        border: none;
        border-radius: 4px;
        background-color: #E0E9EF;
        box-shadow: 0 17px 25px 0 rgba(49, 49, 49, 0.5);
        color: #313131;

        display: flex;
        justify-content: space-between;
        align-items: center;

      }

      .date:hover {
        cursor: pointer;
      }

      .date:focus {
        outline: none;
      }

      .date h1 {
        font-size: 2rem;
        font-weight: bold;
        margin: 0;
        padding: 0.5rem 0;
        border-bottom: 2px solid transparent;
      }

      .chevron {
        width: 2.1rem;
        height: 1.2rem;
      }

      .schedule-wrapper {
        width: 40rem;
        position: absolute;
        margin-top: 0.7rem;
        transform: translateX(-52.5%);
        z-index: 2;
        display: flex;
        flex-direction: column;
        align-items: flex-end;
      }

      .schedule-box-arrow {
        background-color: white;
        height: 20px;
        width: 20px;
        border-radius: 2px;
        margin: 0 1.5rem -1.2rem;
        transform: rotate(45deg);
      }

      .schedule-box {
        width: 100%;
        height: 100%;
        background-color: white;
        border: none;
        box-shadow: 0 17px 25px 0 rgba(49, 49, 49, 0.5);
        clip-path: inset(0px -50px -50px -50px);
        border-radius: 4px;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        z-index: 10;
      }

      .schedule-box h1 {
        color: black;
        font-weight: bold;
        text-align: center;
        padding: 2rem 0;
        margin: 0;
        border-bottom: 1px solid #D8D8D7;
        width: 100%;
        font-size: 2rem;
      }

      .detailed-schedule {
        color: #002D72;
        align-self: center;
        text-align: center;
        text-decoration: none;
        font-size: 2rem;
        font-weight: bold;
        padding: 2rem;
        margin: 0;
      }

      .detailed-schedule:hover {
        color: #002D72;
        text-decoration: none;
      }

      .event {
        color: black;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid #D8D8D7;
        padding: 1.3rem 0;
      }

      .past-event {
        background-color: #ebebeb;
      }

      .past-event-text {
        color: #6D7278;
      }

      .live-event {
        background-color: #e0f3ff;
      }

      .event-details {
        display: flex;
        justify-content: flex-start;
        align-items: center;
      }

      .event-time {
        min-width: 8rem;
        display: flex;
        justify-content: flex-start;
        align-items: center;
        margin: 0 1rem;
      }

      .event-details h3 {
        font-size: 2rem;
        font-weight: bold;
        margin: 0;
      }

      .event-details>* {
        font-size: 1.8rem;
      }

      .event-details p {
        margin: 0.05rem;
        color: #002D72;
        font-weight: bold;
        overflow-wrap: break-word;
      }

      .event-details p.presenter {
        color: #313131;
        font-weight: normal;
      }

      .event-details p.past-event-text {
        color: #6D7278;
      }

      .dot {
        height: 0.9rem;
        width: 0.9rem;
        background-color: #bbb;
        border-radius: 50%;
        background-color: #AC0C0C;
        margin: 0.7rem;
      }

      .live {
        color: #AC0C0C;
      }

      .past-event-dot {
        visibility: hidden;
      }

      .future-event-dot {
        visibility: hidden;
      }

      .event-text {
        display: flex;
        justify-content: flex-start;
        align-items: center;
        flex-wrap: wrap;
      }

      .event-action {
        color: #002D72;
        text-decoration: none;
        margin: 1.5rem;
        display: flex;
        justify-content: flex-end;
        align-items: center;
        min-width: 6.1rem;
      }

      .event-action:hover {
        color: #002D72;
        text-decoration: none;
        border: none;
        outline: none;
        cursor: pointer;
      }

      .event-action img {
        margin: 0.5rem;
      }

      .join-event {
        font-size: 1.8rem;
        font-weight: bold;
      }

      .join-event img {
        /* use filter to change color of chevron png */
        filter: brightness(0) saturate(100%) invert(15%) sepia(27%) saturate(6108%) hue-rotate(205deg) brightness(91%) contrast(106%);
        height: 1.1rem;
        width: 1.8rem;
        transform: rotate(-90deg);
      }

      .add-event {
        font-size: 1.6rem;
        font-weight: 500;
        background-color: transparent;
        border: none;
      }

      .add-event:disabled {
        opacity: 0.7;
      }

      .add-event:focus {
        outline: none;
      }


      .add-event img {
        height: 1.4rem;
        width: 1.4rem;
      }

      .remove-event {
        font-size: 1.6rem;
        font-weight: 500;
        background-color: transparent;
        border: none;
        color: #AC0C0C;
      }

      .remove-event:hover {
        color: #AC0C0C;
      }

      .remove-event:disabled {
        opacity: 0.7;
      }

      .remove-event:focus {
        outline: none;
      }


      #add-event-modal {
        position: absolute;
        top: 0px;
        left: 0px;
        z-index: 20;
        width: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
      }

      #add-event-modal-box {
        max-width: 87.8rem;
        padding: 3.4rem;
        margin: 2rem;
        border-radius: 12px;
        background-color: #F8F8F8;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      #add-event-modal-box h1 {
        margin: 1rem 3.4rem 2rem;
        color: #313131;
        font-weight: normal;
        font-size: 2.4rem;
        letter-spacing: 0;
        line-height: 2.9rem;
        text-align: center;
      }

      #add-event-modal-box #modal-box-event-name {
        font-weight: bold;
      }

      #add-event-modal-box a {
        text-decoration: none;
        font-weight: bold;
        color: #0B2668;
      }

      #add-event-modal-box button:hover {
        cursor: pointer;
        outline: none;
      }

      #add-event-modal-box button:focus {
        outline: none;
      }

      #close-event-modal {
        align-self: flex-end;
        border: none;
        background: none;
      }

      #event-modal-box-actions {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
      }

      #event-modal-box-actions button {
        height: 4.5rem;
        width: 18.6rem;
        border-radius: 5px;
        font-size: 1.8rem;
        font-weight: bold;
        letter-spacing: 0.09rem;
        line-height: 2.3rem;
        text-align: center;
        margin: 1rem 1.2rem;
      }

      #undo-event-modal {
        border: 1.5px solid #AC0C0C;
        background-color: #FFFFFF;
        color: #AC0C0C;
      }

      #done-event-modal {
        background-color: #0B2668;
        border: 1.5px solid #0B2668;
        color: #FFFFFF;
      }
    </style>

    {%- assign dates = '' -%}

    {%- assign eventsByDate = data.Events | sort: "StartTime" -%}

    {%- for event in eventsByDate -%}
    {%- assign date = event.StartTime | date: '%Y-%m-%d' -%}
    {%- unless dates contains date -%}
    {%- assign dates = dates | append:date | append:"," -%}
    {%- endunless -%}
    {%- endfor -%}

    <!-- split on dates -->
    {%- assign days = dates | split:',' -%}

    <div id="schedule-divider" class="schedule-divider">
      <div class="schedule-dates">

        {%- assign startMonth = days.first | date:'%B'-%}
        {%- assign endMonth = days.last | date:'%B'-%}

        <h2>
          {%- if startMonth == endMonth -%}
          <!-- for one day events, only print a single date -->
          {% if days.first == days.last %}
          {%- assign start = days.first | date: '%B %e, %Y' -%}
          {{ start }}
          {% else %}
          {%- assign start = days.first | date:'%B %e' -%}
          {%- assign end = days.last | date:'%e, %Y' -%}

          {{ start }}-{{ end }}
          {% endif %}
          {%- else -%}
          <!-- include second month name -->
          {%- assign start = days.first | date:'%B %e' -%}
          {%- assign end = days.last | date:'%B %e, %Y' -%}
          {{ start }} – {{ end }}
          {%- endif -%}

        </h2>


        <h3>Exhibition Schedule</h3>
      </div>
      <div class="date-selectors">

        <!-- loop through days -->
        {%- for day in days -%}

        <!-- start date -->
        {%- assign dayStartInEpoch = day | append: ' 00:00:00' | date : '%s' | plus: 0 -%}
        <!-- end date -->
        {%- assign dayEndInEpoch = day | append: ' 23:59:59' | date : '%s' | plus: 0 -%}
        <!-- day string -->
        {%- assign dayString = day | date:"%A" -%}
        <!-- date string -->
        {%- assign dateString = day | date:"%A, %B %e" -%}

        <!-- assign day id to match date string added to dates above -->
        {%- assign dayId = day | date:"%Y-%m-%d" -%}

        <!-- build schedule dropdowns -->

        <div>
          <button class="date" id="{{dayId}}-schedule" onclick="toggleSchedule(event)">
            <h1 id="{{dayId}}-schedule-text">{{ dayString }}</h1>
            <img id="{{dayId}}-schedule-chevron" class="chevron"
                 src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/chevron.png" />
          </button>
          <div id="{{dayId}}-schedule-wrapper" class="schedule-wrapper" style="display: none;">
            <div id="{{dayId}}-schedule-arrow" class="schedule-box-arrow"></div>
            <div class="schedule-box">
              <h1>{{ dateString }}</h1>

              {%- for event in eventsByDate -%}

              {%- assign eventTimeInEpoch = event.StartTime | date : '%s' | plus: 0 -%}
              {%- assign eventEndTimeInEpoch = eventTimeInEpoch | plus: event.VideoDuration -%}

              {%- if eventTimeInEpoch >= dayStartInEpoch and eventTimeInEpoch <= dayEndInEpoch -%}
              {%- assign name = event.Name | split: ": " -%}

              {%- assign startTime = event.StartTime | date: "%H:%M" -%}
              {%- assign nowInEpoch = "now" | date : '%s' | plus: 0 -%}

              {%- assign status = ''-%}
              <!-- past event -->
              {%- if eventEndTimeInEpoch <= nowInEpoch -%}
              {%- assign status = 'past-event'-%}
              <!-- live event -->
              {%- elsif eventTimeInEpoch <= nowInEpoch and nowInEpoch <= eventEndTimeInEpoch  -%}
              {%- assign status = 'live-event' -%}
              <!-- future event -->
              {%- else -%}
              {%- assign status = 'future-event'-%}
              {%- endif -%}

              <div class="event {{status}}">
                <div class="event-details {{status}}-text">
                  <div class="event-time">
                    <span class="dot {{status}}-dot"></span>
                    <h3>{{ startTime }}</h3>
                  </div>
                  <div class="event-text" id="{{event.Id}}-name">

                    {%- for part in name -%}

                    {%- if part == name.first -%}

                    <p class="presenter {{status}}-text">{{ name.first }}: </p>

                    {%- elsif part == name.last -%}

                    <p>{{ part }}</p>

                    {%- else -%}

                    <p>{{ part }}: </p>

                    {%- endif -%}
                    {%- endfor -%}

                  </div>
                </div>
                {%- if status == "live-event" -%}
                <a href="" class="event-action join-event">Join <img
                    src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/chevron.png" /></a>
                {%- elsif status == "future-event" -%}
                <button id="{{event.Id}}-add-button" class="event-action add-event" onclick="openModal(event)">Add
                  <img src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/add-icon.png" /></button>
                <button id="{{event.Id}}-remove-button" class="event-action remove-event" style="display:none;"
                        onclick="handleRemoveFromAgenda(event)">Remove
                </button>
                {%- else -%}
                <a href="" class="event-action"></a>
                {%- endif -%}
              </div>

              {%- endif -%}

              {%- endfor -%}

              <a href="#" class="detailed-schedule">View Detailed Schedule</a>
            </div>
          </div>
        </div>

        <!-- end of looping through days -->
        {%- endfor -%}

      </div>

    </div>

    <div id="add-event-modal" style="display:none;" onclick=handleAddEventModalClick(event);>

      <div id="add-event-modal-box">

        <button id="close-event-modal"><img id="close-event-modal-img"
                                            src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/close-icon.png" /></button>

        <h1>The live event <span id="modal-box-event-name"></span> has been added. Access all of your added events in
            the <a href="/videos/bookmarks">My Agenda</a> section.</h1>

        <div id="event-modal-box-actions">
          <button id="undo-event-modal">Undo</button>
          <button id="done-event-modal">Done</button>
        </div>

      </div>

    </div>

    <script>

      // handle schedule selectors
      var dates = "{{ dates }}"
      var days = dates.split(",");

      // remove final element if empty, the result of liquid adding commas behind all elements in for loop
      if (!days[days.length - 1]) days.pop();

      var toggleSchedule = e => {
        let target = e.currentTarget;

        if (target.style.backgroundColor !== "white") {
          target.style.backgroundColor = "white";
        } else {
          target.style.backgroundColor = "#E0E9EF";
        }

        let id = target.id.replace("-schedule", "");

        let text = landingPageEl.getElementById(id + "-schedule-text");
        let chevron = landingPageEl.getElementById(id + "-schedule-chevron");
        let schedule = landingPageEl.getElementById(id + "-schedule-wrapper");

        if (text.style.borderBottom !== "2px solid black") {
          text.style.borderBottom = "2px solid black";
        } else {
          text.style.borderBottom = "";
        }

        if (chevron.style.transform !== "rotate(180deg)") {
          chevron.style.transform = "rotate(180deg)";
        } else {
          chevron.style.transform = "";
        }

        if (schedule.style.display === "none") {
          schedule.style.display = "";
        } else {
          schedule.style.display = "none";
        }

        for (let day of days) {
          if (day !== id) {
            hideSchedule(day);
          }
        }

      }

      var hideSchedule = day => {

        let buttonId = day + "-schedule";
        let textId = day + "-schedule-text";
        let chevronId = day + "-schedule-chevron";
        let boxId = day + "-schedule-wrapper";

        let button = landingPageEl.getElementById(buttonId);
        if (button) button.style.backgroundColor = "#E0E9EF";

        let text = landingPageEl.getElementById(textId)
        if (text) text.style.borderBottom = "";

        let chevron = landingPageEl.getElementById(chevronId)
        if (chevron) chevron.style.transform = "";

        let box = landingPageEl.getElementById(boxId)
        if (box) box.style.display = "none";

      }

      // handle responsiveness
      var contentSection = landingPageEl.getElementById("ntar-bg")

      var scheduleResizeObserver = new ResizeObserver(entries => {
        for (const entry of entries) {
          let contentWidth = contentSection.offsetWidth;

          for (let day of days) {

            // position checks
            let dayBox = landingPageEl.getElementById(day + "-schedule");
            let dayBoxOffset = dayBox.offsetLeft;
            let dayBoxWidth = dayBox.offsetWidth;
            let centerPosition = dayBoxOffset + (dayBoxWidth / 2);

            let midwayPoint = contentWidth / 2;

            // transformations
            let dayWrapper = landingPageEl.getElementById(day + "-schedule-wrapper");
            let dayPointer = landingPageEl.getElementById(day + "-schedule-arrow");

            if (dayWrapper && dayPointer) {

              if (centerPosition < midwayPoint) {
                dayWrapper.style.transform = "translateX(2.5%)";
                dayPointer.style.alignSelf = "flex-start";
              } else {
                dayWrapper.style.transform = "";
                dayPointer.style.alignSelf = "";
              }
            }

          }
        }
      });

      scheduleResizeObserver.observe(contentSection);

      // handle agenda actions

      var agenda = [];

      var addingId = "";

      var openModal = e => {

        let target = e.currentTarget;

        let fullId = target.id;

        let id = fullId.replace("-add-button", "");

        addingId = id;


        addToAgenda(id);

        let eventName = landingPageEl.getElementById(id + "-name").innerHTML;
        eventName = eventName.replace(/<p>/g, "");
        eventName = eventName.replace(/<\/p>/g, "");
        eventName = eventName.replace(/<p class="presenter future-event-text">/g, "")
        let eventNameSpan = landingPageEl.getElementById("modal-box-event-name");
        eventNameSpan.innerHTML = eventName;

        // set modal overlay
        let contentSection = landingPageEl.getElementById("ntar-bg");
        let contentHeight = contentSection.scrollHeight;
        let modal = landingPageEl.getElementById("add-event-modal");
        modal.style.display = "flex";
        modal.style.height = contentHeight.toString() + "px";

        // set modal box position
        let scheduleDivider = landingPageEl.getElementById("schedule-divider");
        let scheduleTop = scheduleDivider.offsetTop;
        let eventTop = target.offsetTop;
        let totalTop = scheduleTop + eventTop;
        let modalBox = landingPageEl.getElementById("add-event-modal-box");
        modalBox.style.transform = "translateY(" + totalTop.toString() + "px" + ")"
      }

      var handleAddEventModalClick = e => {

        let target = e.target;

        if (target.id === "add-event-modal" ||
          target.id === "close-event-modal" ||
          target.id === "close-event-modal-img" ||
          target.id === "done-event-modal") {

          closeModal();

        }
        else if (target.id === "undo-event-modal") {

          removeFromAgenda(addingId);
          closeModal();

        }
      }

      var closeModal = () => {
        let modal = landingPageEl.getElementById("add-event-modal");
        modal.style.display = "none";
      }

      var addToAgenda = id => {
        const urlBase = "https://ingress.infernocore.jolokia.com/api/Bookmarks/";
        const url = urlBase + id;

        const bearerToken = window.sessionStorage.getItem("token");
        const bearer = 'Bearer ' + bearerToken;

        disableAddButton(id);

        fetch(url, {
          method: 'POST',
          withCredentials: true,
          headers: { 'Authorization': bearer }
        })
          .then(() => {
            hideAddButton(id);
            setRemoveButton(id);

            // handle page too
            if (typeof pageHideAddButton !== 'undefined') {
              pageHideAddButton(id);
            }
            if (typeof pageSetRemoveButton !== 'undefined') {
              pageSetRemoveButton(id);
            }
          })
          .catch(err => console.log(err))
          .finally(() => enableAddButton(id));
      }

      var handleRemoveFromAgenda = e => {

        let target = e.currentTarget;

        let fullId = target.id;

        let id = fullId.replace("-remove-button", "");

        removeFromAgenda(id);

      }

      var removeFromAgenda = id => {
        const urlBase = "https://ingress.infernocore.jolokia.com/api/Bookmarks/";
        const url = urlBase + id;

        const bearerToken = window.sessionStorage.getItem("token");
        const bearer = 'Bearer ' + bearerToken;

        disableRemoveButton(id);

        fetch(url, {
          method: 'DELETE',
          withCredentials: true,
          headers: { 'Authorization': bearer }
        })
          .then(() => {
            hideRemoveButton(id);
            setAddButton(id);

            // handle page too
            if (typeof pageHideRemoveButton !== 'undefined') {
              pageHideRemoveButton(id);
            }
            if (typeof pageSetAddButton !== 'undefined') {
              pageSetAddButton(id);
            }
          })
          .catch(err => console.log(err))
          .finally(() => enableRemoveButton(id));
      }

      var setAddButton = id => {
        let target = landingPageEl.getElementById(id + "-add-button");
        if (target) target.style.display = "";
      }

      var hideAddButton = id => {
        let target = landingPageEl.getElementById(id + "-add-button");
        if (target) target.style.display = "none";
      }

      var setRemoveButton = id => {
        let target = landingPageEl.getElementById(id + "-remove-button");
        if (target) target.style.display = "";
      }

      var hideRemoveButton = id => {
        let target = landingPageEl.getElementById(id + "-remove-button");
        if (target) target.style.display = "none";
      }

      var enableAddButton = id => {
        let target = landingPageEl.getElementById(id + "-add-button");
        if (target) target.disabled = false;
      }

      var disableAddButton = id => {
        let target = landingPageEl.getElementById(id + "-add-button");
        if (target) target.disabled = true;
      }

      var enableRemoveButton = id => {
        let target = landingPageEl.getElementById(id + "-remove-button");
        if (target) target.disabled = false;
      }

      var disableRemoveButton = id => {
        let target = landingPageEl.getElementById(id + "-remove-button");
        if (target) target.disabled = true;
      }

      var setBookmarks = bookmarks => {
        if (bookmarks && bookmarks.length) {
          for (let bookmark of bookmarks) {
            let id = bookmark.eventId;
            hideAddButton(id);
            setRemoveButton(id);
          }
        }
      }

      var getBookmarks = () => {
        const url = "https://ingress.infernocore.jolokia.com/api/Bookmarks/Basic";

        const bearerToken = window.sessionStorage.getItem("token");
        const bearer = 'Bearer ' + bearerToken;

        fetch(url, {
          method: 'GET',
          withCredentials: true,
          headers: {
            'Authorization': bearer
          }
        })
          .then(res => res.json())
          .then(json => setBookmarks(json))
          .catch(err => console.log(err));
      }


      getBookmarks();
    </script>

    <!-- #### end of schedule divider widget #### -->

    <!-- end of schedule divider -->

    <div class="search-exhibitors-divider">
      <div class="filter-options">
        <div class="search-wrapper">
          <input id="search-attendees" placeholder="Search Attendees" oninput="searchAttendees(event)" />
          <img src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/search-icon.png" />
        </div>

        <div class="select-wrapper">
          <select id="select-attendees-industry" onchange="filterAttendeesByIndustry(event)">
            <option class="option" value="">By Industry</option>
            <option value="commerce">Commerce</option>
            <option value="education">Education</option>
            <option value="robotics">Robotics</option>
            <option value="technology">Technology</option>
          </select>
        </div>

        <button id="all-grouping" onclick="allAttendees()">All</button>
        <button id="ae-grouping" onclick="filterAttendeesAE()">A - E</button>
        <button id="fj-grouping" onclick="filterAttendeesFJ()">F - J</button>
        <button id="ko-grouping" onclick="filterAttendeesKO()">K - O</button>
        <button id="pt-grouping" onclick="filterAttendeesPT()">P - T</button>
        <button id="uz-grouping" onclick="filterAttendeesUZ()">U - Z</button>
      </div>
    </div>

    <div id="attendee-list" class="attendee-list">

      <template id="attendee-template">
        <div id="attendee" class="attendee">
          <img id="avatar" class="avatar" />
          <div class="details">
            <div class="a-row header">
              <h1 id="name"></h1>
              <h2 id="online-badge" style="display:none;">&bull; Online</h2>
            </div>
            <div class="a-row">
              <h4 id="job">
              </h4>
            </div>
            <div class="a-row">
              <h4 id="industry"></h4>
            </div>
            <div class="a-row a-footer">
              <div class="contact">
                <img
                    src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/attendees/email-icon.png" />
                <a id="email" href="" target="_blank" rel="noreferrer"></a>
              </div>
              <div class="contact">
                <img
                    src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/attendees/website-icon.png" />
                <a id="company-link" href="" target="_blank" rel="noreferrer"></a>
              </div>
              <div class="contact">
                <img
                    src=" https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/attendees/business-card-icon.png" />
                <a id="business-card" href="" target="_blank" rel="noreferrer">Business Card</a>
              </div>
            </div>

          </div>
          <div class="actions">
            <button class="send-message" id="send-message-button">
              Send a Message
            </button>
            <button class="request-meeting">
              Request a Meeting
            </button>

          </div>
        </div>
      </template>


      <h1 id="no-attendees-message" class="no-attendees-message" style="display:none;">No attendees found.</h1>

    </div>

    <div id="modal" class="modal" onclick="handleModalClick(event)">

      <div id="message-box" class="attendee message-box">
        <div class="mb-row">
          <img class="avatar" id="mb-avatar" />
          <div class="details">
            <div class="a-row header">
              <h1 id="mb-name"></h1>
              <h2 id="mb-online-badge" style="display:none;">&bull; Online</h2>
            </div>
            <div class="a-row">
              <h4 id="mb-job">
              </h4>
            </div>
          </div>
          <div class="mb-actions">
            <button id="close-modal-1" class="close-modal"><img id="close-modal-image-1"
                                                                src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/close-icon.png" /></button>
          </div>
        </div>

        <div class="mb-row">

          <textarea id="message-textarea" oninput="turnOnSend(event)"></textarea>

        </div>

        <div class="mb-footer">

          <button id="final-send" class="final-send" disabled onclick="sendMessage()">
            Send
          </button>

        </div>
      </div>

      <div id="message-confirmation" class="attendee message-box" style="display:none;">
        <div class="mc-row mc-flex-end">
          <div class="mb-actions">
            <button id="close-modal-2" class="close-modal"><img id="close-modal-image-2"
                                                                src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/close-icon.png" /></button>
          </div>
        </div>

        <div class="mc-row mc-center">
          <h1 id="send-confirmation">
          </h1>
        </div>

        <div class="mc-row mc-center">
          <button id="done-message" class="final-send">
            Done
          </button>
        </div>


      </div>
    </div>

    <hr />
    <div class="sponsors-section">
      <div class="sponsors-header">
        <h1>Our Sponsors</h1>
        <a href="/videos/bacf2f95-c575-43c1-9210-08d83b177ae4/landing/a8154896-92f2-43f4-9108-8c91da797a57">View All
                                                                                                            Sponsors</a>
      </div>
      <div id="sponsor-list" class="sponsors-list">

        <template id="sponsor-template">
          <img id="sponsor-logo" src="" />
        </template>
      </div>
    </div>



    <footer>
      <div class="info">
        <div class="info-links">
          <a href="#">Privacy Policy</a> | <a href="#">Terms & Conditions</a>
        </div>
        <p>Copyright © 2020 NexTech AR Solutions Inc.</p>
      </div>
      <div class="social">
        <p class="social-links-title">Follow us on social:</p>
        <div class="social-links">
          <a href="#"><img class="social-link"
                           src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/footer/linkedin.png" /></a>
          <a href-"#"><img class="social-link"
                           src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/footer/facebook.png" /></a>
          <a href="#"><img class="social-link"
                           src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/footer/youtube.png" /></a>
          <a href="#"><img class="social-link"
                           src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/footer/ig.png" /></a>
        </div>
      </div>

    </footer>

  </div>
</div>


<script>

  var attendeesBaseUrl = "https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/attendees/";

  var messaging = "";

  var attendees = [
    {
      firstName: "Allison",
      lastName: "Aniston",
      email: "allison.aniston@dell.com",
      title: "Content Strategist",
      company: "Dell Technologies",
      industry: "Technology",
      companyLink: "www.dell.com",
      businessCard: "https://www.google.com",
      avatar: attendeesBaseUrl + "face.png",
      online: true,
      visible: true
    },
    {
      firstName: "Daniel",
      lastName: "Guzman",
      email: "daniel.guzman@dell.com",
      title: "Content Strategist",
      company: "Dell Technologies",
      industry: "Education",
      companyLink: "www.dell.com",
      businessCard: "https://www.google.com",
      avatar: attendeesBaseUrl + "face-3.png",
      online: false,
      visible: true
    },
    {
      firstName: "Theresa",
      lastName: "Watson",
      email: "theresa.watson@dell.com",
      title: "VP of Marketing",
      company: "Staubli",
      industry: "Robotics",
      companyLink: "www.staubli.com",
      businessCard: "https://www.google.com",
      avatar: attendeesBaseUrl + "face-2.png",
      online: false,
      visible: true
    },
    {
      firstName: "Manuel",
      lastName: "Miles",
      email: "manuel.miles@dell.com",
      title: "Dean of Science",
      company: "Ryerson University",
      industry: "Education",
      companyLink: "www.ryersonuniversity.com",
      businessCard: "https://www.google.com",
      avatar: attendeesBaseUrl + "face-4.png",
      online: true,
      visible: true
    },
  ]

  var buildAttendeeList = () => {

    const attendeeList = landingPageEl.getElementById("attendee-list");
    const attendeeTemplate = landingPageEl.getElementById("attendee-template");

    for (let at of attendees) {

      let clone = attendeeTemplate.content.cloneNode(true);

      let attendeeDiv = clone.getElementById("attendee");
      attendeeDiv.id = "at-" + at.firstName.toLowerCase() + "-" + at.lastName.toLowerCase();

      if (at.online) {
        let online = clone.getElementById("online-badge");
        online.style = "";
      }

      let avatar = clone.getElementById("avatar");
      avatar.src = at.avatar;

      let name = clone.getElementById("name");
      name.innerHTML = at.firstName + " " + at.lastName;

      let email = clone.getElementById("email");
      email.innerHTML = at.email;
      email.href = "mailto:" + at.email;

      let companyLink = clone.getElementById("company-link");
      companyLink.innerHTML = at.companyLink;
      companyLink.href = at.companyLink;

      let businessCard = clone.getElementById("business-card");
      businessCard.href = at.businessCard;

      let job = clone.getElementById("job");
      job.innerHTML = at.title + " – " + "<b>" + at.company + "</b>";

      let industry = clone.getElementById("industry");
      industry.innerHTML = "Industry – " + "<b>" + at.industry + "</b>"

      let sendMessageButton = clone.getElementById("send-message-button");
      sendMessageButton.id = at.firstName + " " + at.lastName;

      attendeeList.appendChild(clone);
    }

  }

  buildAttendeeList();

  var updateAttendees = () => {

    let empty = true;

    for (let at of attendees) {

      let id = "at-" + at.firstName.toLowerCase() + "-" + at.lastName.toLowerCase();
      let el = landingPageEl.getElementById(id);

      if (el) {
        if (at.visible) {
          empty = false;
          el.style.display = ""
        }
        else {
          el.style.display = "none";
        }
      }
    }

    let emptyMessage = landingPageEl.getElementById("no-attendees-message");

    if (empty) {
      emptyMessage.style.display = "";
    }
    else {
      emptyMessage.style.display = "none";
    }
  }

  var searchAttendees = e => {
    let query = e.currentTarget.value.toLowerCase();

    for (let at of attendees) {

      if (at.firstName.toLowerCase().startsWith(query) || at.lastName.toLowerCase().startsWith(query)) {
        at.visible = true;
      } else {
        at.visible = false;
      }

    }

    clearIndustrySelect();
    clearLetterGroupings();

    updateAttendees();

  }

  var filterAttendeesByIndustry = e => {
    let query = e.currentTarget.value;

    if (query === "") {
      for (let at of attendees) {
        at.visible = true;
      }
    } else {
      for (let at of attendees) {
        if (at.industry.toLowerCase() === query) {
          at.visible = true;
        } else {
          at.visible = false;
        }
      }
    }

    clearSearchValue();
    clearLetterGroupings();

    updateAttendees();
  }

  var letterGroupings = [
    "all-grouping",
    "ae-grouping",
    "fj-grouping",
    "ko-grouping",
    "pt-grouping",
    "uz-grouping",
  ];

  var clearLetterGroupings = () => {
    for (let group of letterGroupings) {
      let el = landingPageEl.getElementById(group);
      el.style.color = "";
      el.style.backgroundColor = "";
    }

  }

  var clearIndustrySelect = () => {
    let select = landingPageEl.getElementById("select-attendees-industry");
    select.selectedIndex = 0;
  }

  var clearSearchValue = () => {
    let search = landingPageEl.getElementById("search-attendees")
    search.value = "";
  }

  var allAttendees = () => {

    for (let at of attendees) {
      at.visible = true;
    }

    clearSearchValue();
    clearIndustrySelect();
    clearLetterGroupings();

    landingPageEl.getElementById("all-grouping").style.color = "white";
    landingPageEl.getElementById("all-grouping").style.backgroundColor = "#41578B";

    updateAttendees();

  }

  var AE = "abcde";
  var filterAttendeesAE = () => {

    let filtered = []

    for (let at of attendees) {

      if (AE.includes(at.firstName[0].toLowerCase()) || AE.includes(at.lastName[0].toLowerCase())) {
        at.visible = true;
      } else {
        at.visible = false;
      }

    }

    clearSearchValue();
    clearIndustrySelect();
    clearLetterGroupings();

    landingPageEl.getElementById("ae-grouping").style.color = "white";
    landingPageEl.getElementById("ae-grouping").style.backgroundColor = "#41578B";

    updateAttendees();

  }

  var FJ = "fghij";
  var filterAttendeesFJ = () => {

    for (let at of attendees) {

      if (FJ.includes(at.firstName[0].toLowerCase()) || FJ.includes(at.lastName[0].toLowerCase())) {
        at.visible = true;
      } else {
        at.visible = false;
      }

    }

    clearSearchValue();
    clearIndustrySelect();
    clearLetterGroupings();

    landingPageEl.getElementById("fj-grouping").style.color = "white";
    landingPageEl.getElementById("fj-grouping").style.backgroundColor = "#41578B";

    updateAttendees();

  }

  var KO = "klmno";
  var filterAttendeesKO = () => {

    for (let at of attendees) {

      if (KO.includes(at.firstName[0].toLowerCase()) || KO.includes(at.lastName[0].toLowerCase())) {
        at.visible = true;
      } else {
        at.visible = false;
      }

    }

    clearSearchValue();
    clearIndustrySelect();
    clearLetterGroupings();

    landingPageEl.getElementById("ko-grouping").style.color = "white";
    landingPageEl.getElementById("ko-grouping").style.backgroundColor = "#41578B";

    updateAttendees();

  }

  var PT = "pqrst";
  var filterAttendeesPT = () => {

    for (let at of attendees) {

      if (PT.includes(at.firstName[0].toLowerCase()) || PT.includes(at.lastName[0].toLowerCase())) {
        at.visible = true;
      } else {
        at.visible = false;
      }

    }

    clearSearchValue();
    clearIndustrySelect();
    clearLetterGroupings();

    landingPageEl.getElementById("pt-grouping").style.color = "white";
    landingPageEl.getElementById("pt-grouping").style.backgroundColor = "#41578B";

    updateAttendees();

  }


  var UZ = "uvwxyz";
  var filterAttendeesUZ = () => {

    for (let at of attendees) {

      if (UZ.includes(at.firstName[0].toLowerCase()) || UZ.includes(at.lastName[0].toLowerCase())) {
        at.visible = true;
      } else {
        at.visible = false;
      }

    }

    clearSearchValue();
    clearIndustrySelect();
    clearLetterGroupings();

    landingPageEl.getElementById("uz-grouping").style.color = "white";
    landingPageEl.getElementById("uz-grouping").style.backgroundColor = "#41578B";

    updateAttendees();

  }

</script>

<script>
  // handle sponsors

  var sponsors = ["dell", "johnson and johnson", "poly", "staubli", "telus", "viacom"]

  var baseUrl = "https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/sponsors/"

  var sponsorList = landingPageEl.getElementById("sponsor-list");

  var sponsorTemplate = landingPageEl.getElementById("sponsor-template");

  for (let sponsor of sponsors) {

    let clone = sponsorTemplate.content.cloneNode(true);

    let img = clone.getElementById("sponsor-logo");

    img.id = "sponsor-logo-" + sponsor;

    img.src = baseUrl + sponsor + ".png";

    sponsorList.appendChild(clone);


  }

</script>

<script>

  var contentSection = landingPageEl.getElementById("ntar-bg")

  var resizeObserver = new ResizeObserver(entries => {
    for (const entry of entries) {
      var contentWidth = contentSection.offsetWidth;

      var bannerImg = landingPageEl.getElementById("banner-image");

      if (contentWidth <= 930) {
        bannerImg.style.display = "none";
      }
      else {
        bannerImg.style.display = "";
      }

    }
  });

  resizeObserver.observe(contentSection);
</script>

<script>
  // handle modal

  var showModal = e => {

    // get attendee
    let id = e.currentTarget.id;

    let at = attendees.find(at => at.firstName + " " + at.lastName === id);

    // set attendee data
    messaging = at.firstName + " " + at.lastName;

    // set attendee info in message box

    if (at.online) {
      let online = landingPageEl.getElementById("mb-online-badge");
      online.style = "";
    }

    let avatar = landingPageEl.getElementById("mb-avatar");
    avatar.src = at.avatar;

    let name = landingPageEl.getElementById("mb-name");
    name.innerHTML = at.firstName + " " + at.lastName;

    let job = landingPageEl.getElementById("mb-job");
    job.innerHTML = at.title + " – " + "<b>" + at.company + "</b>";

    let contentSection = landingPageEl.getElementById("main")
    let contentHeight = contentSection.offsetHeight;

    let modal = landingPageEl.getElementById("modal");

    modal.style.display = "flex";
    modal.style.height = contentHeight.toString() + "px";

    let messageBox = landingPageEl.getElementById("message-box");
    messageBox.scrollIntoView();

  }

  var handleModalClick = e => {

    let target = e.target;

    if (target.id === "modal" ||
      target.id === "close-modal-1" ||
      target.id === "close-modal-image-1" ||
      target.id === "close-modal-2" ||
      target.id === "close-modal-image-2" ||
      target.id === "done-message") {

      // reset messageBox and confirmation
      let messageBox = landingPageEl.getElementById("message-box");
      messageBox.style.display = "";

      let messageTextArea = landingPageEl.getElementById("message-textarea");
      messageTextArea.value = "";

      let messageConfirmation = landingPageEl.getElementById("message-confirmation");
      messageConfirmation.style.display = "none";

      let modal = landingPageEl.getElementById("modal");

      let messaging = "";

      modal.style.display = "";

    }

  }

  var turnOnSend = e => {

    let target = e.target;

    let sendButton = landingPageEl.getElementById("final-send");

    if (target.value.trim().length > 0) {
      sendButton.disabled = false;
    } else {
      sendButton.disabled = true;
    }

  }

  var sendMessage = async e => {

    let promise = new Promise(function (resolve, reject) {
      setTimeout(() => resolve("done"), 0);
    });

    await promise;


    let messageBox = landingPageEl.getElementById("message-box");
    messageBox.style.display = "none";

    let messageConfirmation = landingPageEl.getElementById("message-confirmation");

    messageConfirmation.style.display = "";

    let message = landingPageEl.getElementById("send-confirmation");
    message.innerHTML = "Your message to " + messaging + " has been successfully sent!";
  }

</script>


<!-- ##### chat widget ##### -->

<script type="text/javascript">
  setTimeout(function () {
    (function () {
      var s1 = document.createElement("script"), s0 = document.getElementsByTagName("script")[0];
      s1.async = true;
      s1.src = 'https://chatwee-api.com/v2/script/5f5f60102f3d91228471fce6.js';
      s1.charset = 'UTF-8';
      s1.setAttribute('crossorigin', '*');
      s0.parentNode.insertBefore(s1, s0);
    })();
  }, 500);
</script>

<script type="text/javascript">
  setTimeout(function () {
    (function () {
      var link1 = document.createElement("link"), body = document.getElementsByTagName("body")[0];

      link1.setAttribute("rel", "stylesheet")
      link1.setAttribute("type", "text/css")
      link1.setAttribute("href", "https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/chatwee-styling.css")
      link1.setAttribute("media", "all")
      body.parentNode.insertBefore(link1, body);
    })();
  }, 100);
</script>

{%- assign userInfernoId = data.CurrentViewingUser.Id -%}
{%- assign userFirstName = data.CurrentViewingUser.FirstName -%}
{%- assign userLastName = data.CurrentViewingUser.LastName -%}

<!-- get duration till end of conference plus one day for buffer -->
{%- assign eventsByDate = data.Events | sort: "StartTime" -%}
{%- assign lastEvent = eventsByDate.last -%}

{%- assign eventStart = lastEvent.StartTime | date: "%s" | plus: 0 -%}
{%- assign eventEnd = eventStart | plus: lastEvent.VideoDuration -%}
{%- assign nowTimestamp = "now" | date: "%s" | plus: 0 -%}

<!-- difference in seconds -->
{%- assign diffSeconds =  eventEnd | minus:nowTimestamp -%}
{%- assign secondsInADay = 5 | times: 24 | times: 60 | times: 60 -%}
{%- assign chatDuration = diffSeconds | plus: secondsInADay -%}

<script async>

  var userInfernoId = "{{ userInfernoId }}";
  var firstName = "{{ userFirstName }}";
  var lastName = "{{ userLastName }}";
  // var userAvatar = "https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/inferno-flame.png";
  var chatDuration = "{{ chatDuration }}";
  // var firstName = "testFirst"
  // var lastName = "testLast"
  // var chatDuration = 50000

  var chatweeValues = {
    userIdKey: "chatwee-user-id",
    sessionIdKey: "chatwee-SID-5f47b04141f1d417ef0ef4d2",
    chatId: "5f47b04141f1d417ef0ef4d2",
    clientKey: "675fa0c0c93c392957625bde",
    isAdmin: 0,
    ssoBaseUrl: "https://chatwee-api.com/v2/sso-user/"
  }

  // helper functions
  var getCookie = key => {
    let cookieValue = "";

    const cookieList = document.cookie;
    if (cookieList) {
      const cookie = cookieList
        .split("; ")
        .find(row => row.startsWith(key));

      if (cookie) {
        cookieValue = cookie.split("=")[1];
      }

    }
    return cookieValue;
  }

  var setCookie = (key, value, age) => {
    document.cookie = key + "=" + value + "; max-age=" + age + "; path=/";
  }


  var validateChatSessionId = sessionId => {
    const url = chatweeValues.ssoBaseUrl + "validate-session?" + "chatId=" + chatweeValues.chatId + "&clientKey=" + chatweeValues.clientKey + "&sessionId=" + sessionId;

    return fetch(url).then(res => res.json());
  }

  var loginChat = userId => {
    const url = chatweeValues.ssoBaseUrl + "login?" + "chatId=" + chatweeValues.chatId + "&clientKey=" + chatweeValues.clientKey + "&userId=" + userId;

    return fetch(url).then(res => res.json());
  }

  var registerChat = () => {
    const name = firstName + " " + lastName;

    const url = chatweeValues.ssoBaseUrl + "register?" + "chatId=" + chatweeValues.chatId + "&clientKey=" + chatweeValues.clientKey + "&login=" + name + "&isAdmin=" + chatweeValues.isAdmin //+ "&avatar=" + userAvatar;

    return fetch(url).then(res => res.json());
  }

  // connect to Chatwee
  var connectChat = async () => {

    // see if session id locally
    let sessionId = getCookie(chatweeValues.sessionIdKey);

    if (sessionId) {
      // validate session id with chatwee
      let valid
      try {
        valid = await validateChatSessionId(sessionId);
      } catch (e) {
        throw new Error(e);
      }

      // if true, do nothing
      if (valid) return;

    }

    // if false, check if user id is present locally
    const userId = getCookie(chatweeValues.userIdKey);

    // if true, login and set session id locally
    if (userId) {
      let sessionId = ""
      try {
        sessionId = await loginChat(userId);
      } catch (e) {
        throw new Error(e);
      }

      setCookie(chatweeValues.sessionIdKey, sessionId, chatDuration);
    }
    // if false, register and set user id and log in user
    else {
      let userId = ""
      try {
        userId = await registerChat();
      } catch (e) {
        throw new Error(e);
      }

      setCookie(chatweeValues.userIdKey, userId, chatDuration);

      let sessionId = ""
      try {
        sessionId = await loginChat(userId);
      }
      catch (e) {
        throw new Error(e);
      }
      setCookie(chatweeValues.sessionIdKey, sessionId, chatDuration);

    }

    return;
  }

  // var getProfileImage = () => {
  //   let url = "https://ingress.infernocore.jolokia.com/api/ProfileImage/" + userInfernoId + "/100" + "/100";
  //   return fetch(url);
  // }

  var makeCalls = async () => {
    // const profileImage = await getProfileImage();
    // console.log("PROFILE IMAGE ", profileImage);
    connectChat();
  }

  // makeCalls();

</script>

<!-- ##### end of  chat widget ##### -->
