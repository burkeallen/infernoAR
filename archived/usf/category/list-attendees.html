<!-- Attendees List -->
<style>
  .h1, .h2, .h3, .h4, .h5, .h6, h1, h2, h3, h4, h5, h6 {
    font-family: 'Trade Gothic', sans-serif;
  }

  /* prevent entire screen from going black if you try to reference an image that does not exist*/
  /* apparently some style or JS that is setting a style do that somewhere else in the inferno system*/
  img::after {
    content: none;
  }

  #ntar-bg {
    font-family: 'Trade Gothic', sans-serif;
    font-weight: normal;
    font-style: normal;
    position: absolute;
    width: 100%;
    height: calc(100vh - 56px);
    margin: -20px;
    background-color: #466069;
    overflow-y: auto;
    scroll-behavior: smooth;
  }

  .main {
    display: flex;
    flex-direction: column;
    justify-content: center;
  }


  hr {
    border: 1px solid rgba(11, 38, 104, 0.32);
    margin: 2.8rem 0;
  }

  .filter-options {
    width: 100%;
    margin: 0 3.5rem;
    display: flex;
    flex-wrap: wrap;
    justify-content: flex-start;
    align-items: center;
  }

  .filter-options button {
    height: 6rem;
    width: 9.8rem;
    border: 2px solid rgba(11, 38, 104, 0.32);
    border-radius: 4px;
    background-color: #FFFFFF;
    margin: 0.9rem;
    padding: 1.3rem 1.6rem;
    color: #3D3D3D;
    font-size: 2rem;
    font-weight: bold;
    letter-spacing: 0;
    line-height: 2.5rem;
    text-align: center;
  }

  .filter-options button:focus {
    outline: none;
    border: 2px solid rgba(11, 38, 104, 0.6);
  }

  .search-wrapper {
    width: 31.5rem;
    border: 2px solid rgba(11, 38, 104, 0.32);
    border-radius: 4px;
    background-color: #FFFFFF;
    margin: 0.9rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .search-wrapper input {
    padding: 1.4rem;
    color: #3D3D3D;
    font-size: 2rem;
    font-weight: bold;
    width: 75%;
    border: none;
  }

  .search-wrapper input::placeholder {
    /* Chrome, Firefox, Opera, Safari 10.1+ */
    color: #3D3D3D;
    opacity: 1;
    /* Firefox */
  }

  .search-wrapper input:-ms-input-placeholder {
    /* Internet Explorer 10-11 */
    color: #3D3D3D;
  }

  .search-wrapper input::-ms-input-placeholder {
    /* Microsoft Edge */
    color: #3D3D3D;
  }

  .search-wrapper img {
    width: 2rem;
    margin: 1.25rem;
  }

  .search-wrapper input:focus {
    outline: none;
    border: none;
  }

  .select-wrapper {
    width: 26.6rem;
    margin: 0.9rem;
    border: 2px solid rgba(11, 38, 104, 0.32);
    border-radius: 4px;
    background-color: #FFFFFF;
  }

  .select-wrapper select {
    width: 96%;
    padding: 1.4rem;
    color: #3D3D3D;
    font-size: 2rem;
    font-weight: bold;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background: url("https://studio304nextechar.freetls.fastly.net/infernoAR/029-usf/assets/chevron.png") no-repeat right #fff;
    background-size: 8%;
    border: none;
  }

  .select-wrapper select:focus {
    outline: none;
  }

  .select-wrapper img {
    width: 2rem;
    margin: 1rem;
  }

  .search-attendees-divider {
    background-color: #cfc493;
    width: 100%;
    padding: 3rem 0;
    display: flex;
    justify-content: center;
  }

  .attendee-list {
    padding: 5.8rem 0;
  }

  .attendee {
    margin: 1.4rem 4.4rem;
    padding: 2rem;
    border-radius: 9px;
    background-color: #FFFFFF;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;

  }

  .attendee .avatar {
    height: 15.2rem;
    width: 15.2rem;
    /* border: 2px solid #6D7278; */
    border-radius: 50%;
  }

  .attendee .details {
    margin: 0 2rem;
    flex-grow: 3;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: flex-start;
  }

  .attendee .details .a-row {
    display: flex;
    align-items: baseline;
  }

  .header h1 {
    font-size: 2.4rem;
    font-weight: bold;
    margin: 0;
  }

  .header h2 {
    color: #52b952;
    font-size: 1.8rem;
    font-weight: bold;
    letter-spacing: 0;
    margin: 0 1rem;
  }

  .attendee .details h4 {
    color: #313131;
    font-size: 1.8rem;
    font-weight: 500;
    letter-spacing: 0;
    line-height: 2.9rem;
    margin: 0;
    max-width: 500px;
  }

  .attendee .details a {
    color: #0B2668;
    font-size: 1.6rem;
    letter-spacing: 0;
    line-height: 2.6rem;
  }

  .attendee .details .header {
    margin: 1.5rem 0;
    display: flex;
    flex-wrap: wrap;
  }

  .attendee .details .a-footer {
    width: 100%;
    margin-top: 3rem;
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
  }

  .attendee .details .a-footer img {
    height: 1.8rem;
    width: auto;
  }

  .contact {
    margin: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .contact img {
    margin: 0 1rem;
  }

  .attendee .actions {
    display: flex;
    flex-direction: column;
    justify-content: space-evenly;
    margin: 1.5rem 0;
  }

  .attendee .actions button {
    width: 24.4rem;
    height: 4.5rem;
    border-radius: 5px;
    margin: 1rem;
    font-size: 18px;
    font-weight: bold;
    letter-spacing: 0.9px;
    line-height: 23px;
    text-align: center;
  }

  .attendee .actions button:hover {
    cursor: pointer;
    outline: none;
    border: 1px solid #0B2668;
  }

  .attendee .actions button:focus {
    outline: none;
    border: 1px solid #0B2668;
  }

  .send-message {
    color: white;
    background-color: #0B2668;
    border: 1px solid #0B2668;
  }

  .request-meeting {
    color: #0B2668;
    background-color: white;
    border: 1px solid #0B2668;
  }
  .no-attendees-message {
    margin: 0;
    color: #0B2668;
    font-size: 2.2rem;
    font-weight: bold;
    letter-spacing: 0.092rem;
    line-height: 2.7rem;
    text-align: center;
  }
</style>

<!--Banner Grid Styles-->
<style>
  .banner {
    display: block;
    margin-top: 20px;
    margin-bottom: 40px;
  }

  .grid-container {
    display: grid;
    grid-template-columns: 0.5fr 1.5fr;
    grid-template-rows: 1fr;
    gap: 1px 20px;
    grid-template-areas:
    "banner-logo banner-info";
  }

  .banner-logo {
    grid-area: banner-logo;
    margin-top: 10px;
    margin-left: 10px;
  }

  .banner-info {
    grid-area: banner-info;
    padding-right: 20px;
  }

  .banner-info h1 {
    font-size: 2.5rem;
    color: var(--branding-primary);
    font-weight: bold;
    margin: 0.5rem 0;
  }

  .banner-info hr {
    border: solid 3px var(--branding-primary);
    margin-bottom: 0.75em;
  }

  .banner-info p {
    font-size: 1.8rem;
    font-weight: 500;
    color: #ffffff;
  }

  @media only screen and (max-width: 1024px) {
    .grid-container {
      display: block;
      text-align: center;
    }
    .banner-logo {
      margin-top: 10px;
      margin-left: auto;
      margin-right: auto;
      padding-left: 20px;
      padding-right: 20px;
    }
    .banner-info {
      padding-left: 20px;
      padding-right: 20px;
    }
    .banner-info h1 {
      margin-bottom: 0;
      font-size: 4em;
    }
    .banner-info hr {
      margin-top: 0;
    }
    .filter-options {
      margin: 12px;
      justify-content: center;
    }
    .filter-options button {
      margin: 6px;
      padding: revert;
    }
    .search-attendees-divider {
      padding: 0;
    }
    .search-wrapper {
      width: 98%;
      margin: 0;
    }
  }
</style>

<div id="ntar-bg">
  <div id="main" class="main">
    <div class="banner">
      <div class="grid-container">
        <div class="banner-logo">
          <img src="https://studio304nextechar.freetls.fastly.net/infernoAR/029-usf/assets/event-logo.png" alt="University of South Florida">
        </div>
        <div class="banner-info">
          <h1>Attendees List</h1>
          <hr />
          <p>Reach out and connect with others here. Send messages, emails, and request meetings all in one spot.</p>
        </div>
      </div>
    </div>

    <div class="search-attendees-divider">
      <div class="filter-options">
        <div class="search-wrapper">
          <input id="search-attendees" placeholder="Search Attendees" oninput="searchAttendeesNovo1(event)" />
          <img src="https://studio304nextechar.freetls.fastly.net/infernoAR/arc2020/assets/search-icon.png" />
        </div>

        <button id="all-grouping" onclick="allattendeesNovo1()">All</button>
        <button id="ae-grouping" onclick="filterAttendeesAENovo1()">A - E</button>
        <button id="fj-grouping" onclick="filterAttendeesFJNovo1()">F - J</button>
        <button id="ko-grouping" onclick="filterattendeesKONovo1()">K - O</button>
        <button id="pt-grouping" onclick="filterAttendeesPTNovo1()">P - T</button>
        <button id="uz-grouping" onclick="filterattendeesUZNovo1()">U - Z</button>
      </div>
    </div>

    <div id="attendee-list" class="attendee-list">

      <template id="attendee-template">
        <div id="attendee" class="attendee">
          <img id="avatar" class="avatar"/>

          <div class="details">

            <div class="a-row header">
              <h1 id="name"></h1>
              <h2 id="online-badge" style="display:none;">&bull; Online</h2>
            </div>

            <div class="a-row">
              <h4 id="job-title">
              </h4>
            </div>

            <div class="a-row a-footer">
              <div class="contact">
                <img id="organization-image"
                     src=" https://studio304nextechar.freetls.fastly.net/infernoAR/029-usf/assets/attendees/business-card-icon.png"/>
                <span id="organization">Organization</span>
              </div>
              <div class="contact">
                <img id="email-image"
                     src="https://studio304nextechar.freetls.fastly.net/infernoAR/029-usf/assets/attendees/email-icon.png"/>
                <a id="email" href="" target="_blank" rel="noreferrer"></a>
              </div>
            </div>

          </div>

          <div class="actions">
            <div class="a-row">
              <h4 id="bio"></h4>
            </div>
          </div>

        </div>
      </template>

      <h1 id="no-attendees-message" class="no-attendees-message" style="display:none;">No people found.</h1>

    </div>

    <hr/>

  </div>
</div>

<script>

  var hasGroupNovo1 = (groups, groupName) => {
    var inGroup = false;
    groups.forEach(group => {
      if (group.Name.toLowerCase().trim() === groupName.toLowerCase().trim()) {
        inGroup = true;
      }
    });
    return inGroup;
  }

  var attendeesNovo1BaseUrlNovo1 = "https://studio304nextechar.freetls.fastly.net/infernoAR/029-usf/assets/attendees/";
  var messagingNovo1 = "";
  var peopleNovo1 = {{ data.UserProfiles | json }} ;
  var attendeesNovo1 = peopleNovo1.filter(user => {
    return hasGroupNovo1(user.UserGroups, 'Attendees');
  })

  var buildAttendeeListNovo1 = () => {
    const attendeeList = landingPageEl.getElementById("attendee-list");
    const attendeeTemplate = landingPageEl.getElementById("attendee-template");

    for (var at of attendeesNovo1) {

      const clone = attendeeTemplate.content.cloneNode(true);

      const attendeeDiv = clone.getElementById("attendee");
      attendeeDiv.id = "at-" + at.FirstName.toLowerCase() + "-" + at.Lastname.toLowerCase();

      if (at.online) {
        const online = clone.getElementById("online-badge");
        online.style = '';
      }

      const avatar = clone.getElementById("avatar");
      avatar.onerror = function () {
        // prevent an infinite loop is second image does not load
        avatar.onerror = null;
        avatar.src = 'https://studio304nextechar.freetls.fastly.net/infernoAR/029-usf/assets/attendees/generic-avatar.jpg';
      }
      avatar.src = ' https://ingress.infernocore.jolokia.com/api/ProfileImage/' + at.UserId + '/250/250';

      const name = clone.getElementById("name");
      name.innerHTML = at.FirstName + " " + at.Lastname;


      const email = clone.getElementById("email");
      const emailImage = clone.getElementById("email-image");
      if (at.ContactInfoEmail) {
        email.innerHTML = at.ContactInfoEmail;
        email.href = "mailto:" + email.innerHTML;
        email.target = "_blank";
      } else {
        email.style.display = "none";
        emailImage.style.display = "none";
      }

      const jobTitle = clone.getElementById("job-title");
      jobTitle.innerHTML = at.ContactInfoTitle ? at.ContactInfoTitle : '';

      const organization = clone.getElementById("organization");
      const organizationImage = clone.getElementById("organization-image");
      if(at.ContactInfoCompany) {
        organization.innerHTML = at.ContactInfoCompany;
      } else {
        organization.style.display = "none";
        organizationImage.style.display = "none";
      }

      const bio = clone.getElementById("bio");
      bio.innerHTML = at.Bio ? at.Bio : '';

      attendeeList.appendChild(clone);
    }

  }

  buildAttendeeListNovo1();

  var updateAttendeesNovo1 = () => {

    var empty = true;

    for (var at of attendeesNovo1) {

      var id = "at-" + at.FirstName.toLowerCase() + "-" + at.Lastname.toLowerCase();
      var el = landingPageEl.getElementById(id);

      if (el) {
        if (at.visible) {
          empty = false;
          el.style.display = ""
        } else {
          el.style.display = "none";
        }
      }
    }

    var emptyMessage = landingPageEl.getElementById("no-attendees-message");

    if (empty) {
      emptyMessage.style.display = "";
    } else {
      emptyMessage.style.display = "none";
    }
  }

  var searchAttendeesNovo1 = e => {
    const query = e.currentTarget.value.toLowerCase();

    for (var at of attendeesNovo1) {
      const fName = at.FirstName ? at.FirstName.toLowerCase() : '';
      const lName = at.Lastname ? at.Lastname.toLowerCase() : '';
      const email = at.ContactInfoEmail ? at.ContactInfoEmail.toLowerCase() : '';
      const org = at.ContactInfoCompany ? at.ContactInfoCompany.toLowerCase() : '';
      const title = at.ContactInfoTitle ? at.ContactInfoTitle.toLowerCase() : '';
      const bio = at.Bio ? at.Bio.toLowerCase() : '';

      at.visible = fName.includes(query)
        || lName.includes(query)
        || email.includes(query)
        || org.toLowerCase().includes(query)
        || title.toLowerCase().includes(query)
        || bio.toLowerCase().includes(query);

    }

    // clearIndustrySelectNovo1();
    clearLetterGroupingsNovo1();
    updateAttendeesNovo1();

  }

  var filterAttendeesNovo1ByIndustry = e => {
    var query = e.currentTarget.value;

    if (query === "") {
      for (var at of attendeesNovo1) {
        at.visible = true;
      }
    } else {
      for (var at of attendeesNovo1) {
        if (at.industry.toLowerCase() === query) {
          at.visible = true;
        } else {
          at.visible = false;
        }
      }
    }

    clearSearchValueNovo1();
    clearLetterGroupingsNovo1();
    updateAttendeesNovo1();
  }

  var letterGroupingsNovo1 = [
    "all-grouping",
    "ae-grouping",
    "fj-grouping",
    "ko-grouping",
    "pt-grouping",
    "uz-grouping",
  ];

  var clearLetterGroupingsNovo1 = () => {
    for (var group of letterGroupingsNovo1) {
      var el = landingPageEl.getElementById(group);
      el.style.color = "";
      el.style.backgroundColor = "";
    }

  }

  var clearIndustrySelectNovo1 = () => {
    var select = landingPageEl.getElementById("select-attendees-industry");
    select.selectedIndex = 0;
  }

  var clearSearchValueNovo1 = () => {
    var search = landingPageEl.getElementById("search-attendees")
    search.value = "";
  }

  var allattendeesNovo1 = () => {

    for (var at of attendeesNovo1) {
      at.visible = true;
    }

    clearSearchValueNovo1();
    // clearIndustrySelectNovo1();
    clearLetterGroupingsNovo1();

    landingPageEl.getElementById("all-grouping").style.color = "white";
    landingPageEl.getElementById("all-grouping").style.backgroundColor = "#41578B";

    updateAttendeesNovo1();

  }


  var filterAttendeesAENovo1 = () => {
    var AE = "abcde";
    var filtered = []

    for (var at of attendeesNovo1) {

      if (AE.includes(at.FirstName[0].toLowerCase()) || AE.includes(at.Lastname[0].toLowerCase())) {
        at.visible = true;
      } else {
        at.visible = false;
      }

    }

    clearSearchValueNovo1();
    // clearIndustrySelectNovo1();
    clearLetterGroupingsNovo1();

    landingPageEl.getElementById("ae-grouping").style.color = "white";
    landingPageEl.getElementById("ae-grouping").style.backgroundColor = "#41578B";

    updateAttendeesNovo1();

  }

  var filterAttendeesFJNovo1 = () => {
    var FJ = "fghij";
    for (var at of attendeesNovo1) {

      if (FJ.includes(at.FirstName[0].toLowerCase()) || FJ.includes(at.Lastname[0].toLowerCase())) {
        at.visible = true;
      } else {
        at.visible = false;
      }

    }

    clearSearchValueNovo1();
    // clearIndustrySelectNovo1();
    clearLetterGroupingsNovo1();

    landingPageEl.getElementById("fj-grouping").style.color = "white";
    landingPageEl.getElementById("fj-grouping").style.backgroundColor = "#41578B";

    updateAttendeesNovo1();

  }

  var filterattendeesKONovo1 = () => {
    var KO = "klmno";
    for (var at of attendeesNovo1) {

      if (KO.includes(at.FirstName[0].toLowerCase()) || KO.includes(at.Lastname[0].toLowerCase())) {
        at.visible = true;
      } else {
        at.visible = false;
      }

    }

    clearSearchValueNovo1();
    // clearIndustrySelectNovo1();
    clearLetterGroupingsNovo1();

    landingPageEl.getElementById("ko-grouping").style.color = "white";
    landingPageEl.getElementById("ko-grouping").style.backgroundColor = "#41578B";

    updateAttendeesNovo1();

  }

  var filterAttendeesPTNovo1 = () => {
    var PT = "pqrst";
    for (var at of attendeesNovo1) {

      if (PT.includes(at.FirstName[0].toLowerCase()) || PT.includes(at.Lastname[0].toLowerCase())) {
        at.visible = true;
      } else {
        at.visible = false;
      }

    }

    clearSearchValueNovo1();
    // clearIndustrySelectNovo1();
    clearLetterGroupingsNovo1();

    landingPageEl.getElementById("pt-grouping").style.color = "white";
    landingPageEl.getElementById("pt-grouping").style.backgroundColor = "#41578B";

    updateAttendeesNovo1();

  }

  var filterattendeesUZNovo1 = () => {
    var UZ = "uvwxyz";
    for (var at of attendeesNovo1) {

      if (UZ.includes(at.FirstName[0].toLowerCase()) || UZ.includes(at.Lastname[0].toLowerCase())) {
        at.visible = true;
      } else {
        at.visible = false;
      }

    }

    clearSearchValueNovo1();
    // clearIndustrySelectNovo1();
    clearLetterGroupingsNovo1();

    landingPageEl.getElementById("uz-grouping").style.color = "white";
    landingPageEl.getElementById("uz-grouping").style.backgroundColor = "#41578B";

    updateAttendeesNovo1();

  }

</script>


