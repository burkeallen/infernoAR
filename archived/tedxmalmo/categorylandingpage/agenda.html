<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Inferno Snippet Mockup Template</title>
  <!-- Import Roboto -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic|Roboto+Mono:400,500|Material+Icons" rel="stylesheet">
  <!-- Import Inferno's Styles -->
  <link rel="stylesheet" href="https://studio304nextechar.freetls.fastly.net/infernoAR/_templates/css/inferno-base-styles.css">
  <link rel="stylesheet" href="https://studio304nextechar.freetls.fastly.net/infernoAR/_templates/css/inferno-extra-styles.css">
  <!--  Local/Client Color Overrides if they file exists -->
  <link rel="stylesheet" href="../inferno-client.css">
  <script>
    let landingPageEl = null
    window.isLocalTemplate = true
  </script>
  <!-- Import JQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
  <!--  Authenticate into the platform and set session values so you can leverage API calls in your snippets -->
  <script>
    function authenticate(project) {
      const _baseUrl = 'https://ingress.infernocore.jolokia.com/api/'
      // Auth w/ Inferno API
      const params = {
        email: project.username,
        password: project.password,
        grantType: 'password',
      }

      // Set header
      const headers = {'X-InfernoCore-Domain': project.domain}

      // perform synchronous ajax call so rest of code waits until you are authenticated
      $.ajax({
        url: _baseUrl + 'token',
        type: 'POST',
        async: false,
        accept: 'application/json',
        contentType: 'application/json',
        headers: headers,
        data: JSON.stringify(params),
        success: function (res) {
          sessionStorage.setItem('domain', project.domain)
          storeUser(JSON.parse(res))
        },
        error: function (err) {
          alert(JSON.stringify(err))
        },
        complete: function () {
          console.log('user was authenticated into ', project.domain)
        },
      })

    }

    function storeUser(data) {
      // console.log(data);
      sessionStorage.setItem('clientId', data.ClientId)
      sessionStorage.setItem('token', data.AccessToken)
      sessionStorage.setItem('refreshToken', data.RefreshToken)
    }

    function login() {
      window.addEventListener('load', (event) => {
        const projectEl = document.querySelector('#novoProject');
        const projectName = projectEl ? projectEl.getAttribute('name') : null;
        const currentProject = projects.filter(project => {
          return project.name === projectName;
        })[0];

        if (!currentProject) {
          alert('could not log into Inferno \n\r Check the project name in the login() function');
          return;
        }

        authenticate(currentProject);
      });
    }

  </script>
  <!-- store your credentials in a local file -->
  <!-- use to keep credentials out of files in case of committing to REPO or sharing template with someone else.-->
  <!-- projects = [{name: 'anything', username: 'email@address.com', password: '**********', domain: 'novologic.infernoar.com'}]-->
  <script onload="login()" onerror="console.error('/inferno.config.js', 'does not exist, can not log into inferno as test user')" src="/inferno.config.js"></script>

  <!-- Liquid Templating -->
  <script src="https://cdn.jsdelivr.net/npm/liquidjs/dist/liquid.min.js"></script>
  <!--  Load Liquid JSON From Local file -->
  <script>
    function loadJSON(file, callback) {

      const xobj = new XMLHttpRequest()
      xobj.overrideMimeType('application/json')
      xobj.open('GET', file, false) // Replace 'my_data' with the path to your file
      xobj.onreadystatechange = function () {
        if (xobj.readyState == 4 && xobj.status == '200') {
          // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
          callback(xobj.responseText)
        }
      }
      xobj.send(null)
    }

    // Insert your liquid data here. Remember to convert from JSON to JS Object (use https://json-to-js.com/ or similar)
    // Set data object to null to skip Liquid processing. You probably want to do this if you're not using liquid as the
    // processing can potentially interfere with scripts that run on page load.
    var data = {}
    loadJSON('../liquid.json', function (response) {
      // Parse JSON string into object
      const x = JSON.parse(response)
      data = x[0]
    })

  </script>

  <!-- Build out Local Menu on Left Navigation -->

  <style>
    #localTemplateMenu {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding: 1em;
    }

    #localTemplateMenu a {
      display: block;
      margin: .25em;
      background-color: var(--sidebar-bg-color);
      border: none;
      border-bottom: solid 1px var(--sidebar-highlight-text-color);
      color: var(--sidebar-text-color);
      cursor: pointer;
      width: 80%;
      padding: .25em 0;
    }

    #localTemplateMenu a:hover {
      filter: brightness(80%);
      text-decoration: none;
      transform: translateX(-.3em);
    }

    #localTemplateMenu a.activeMenu {
      background-color: var(--sidebar-highlight-bg-color);
      color: var(--sidebar-text-color);
    }

    .aside-collapsed * #localTemplateMenu {
      margin: 0;
      padding: 1em 0;
    }

    .aside-collapsed * #localTemplateMenu a {
      word-wrap: break-word;
      min-width: 100%;
      border-radius: 0;
      border-bottom: 1px solid var(--sidebar-text-color);
    }

    .aside-collapsed * #localTemplateMenu a:hover {
      transform: none;
    }

  </style>
  <script>
    function buildLocalMenu() {
      window.addEventListener('load', (event) => {
        const menu = document.getElementById('localTemplateMenu');
        window.localTemplateMenuItems.forEach(item => {
          const menuItem = document.createElement('a');
          menuItem.href = "../" + item.file;
          menuItem.innerHTML = item.name;
          menuItem.setAttribute('title', item.file + '\n\r' + item.snippetID);
          try {
            const currentSnippet = landingPageEl.querySelector('#' + item.snippetID.toString());
            if (currentSnippet) {
              menuItem.classList.toggle('activeMenu');
            }
          } catch (e) {
            // do nothing;
          }
          menu.appendChild(menuItem);
        })
      })
    }
  </script>
  <script onload="buildLocalMenu()" onerror="console.error('../menu.js', 'does not exist, run inferno build {project-name} to generate menu.js file')" src="../menu.js"></script>

</head>

<body>
<div style="display:none" id="novoProject" name="tedxmalmo" onload="login()"></div>
<app-root class="layout-fixed has-menu">
  <videos-layout>
    <div class="wrapper" layout="column">
      <app-header class="topnavbar-wrapper">
        <mat-toolbar class="mat-elevation-z3 navbar topnavbar mat-toolbar mat-primary mat-toolbar-single-row ng-star-inserted" color="primary">
          <div class="navbar-header"><a href="/">LOCAL</a></div>
          <div class="ellipsis ng-star-inserted" flex layout="row" layout-align="start center">
            <button class="menu-btn mat-icon-button ng-star-inserted" hide mat-icon-button show-gt-sm trigger-resize onclick="mtTriggerMenu()">
              <span class="mat-button-wrapper">
                  <mat-icon class="mat-icon material-icons mat-icon-no-color" role="img" aria-hidden="true">
                    menu
                  </mat-icon>
              </span>
            </button>
            <div _ngcontent-inv-c7 class="mat-title ellipsis m0" flex title="Page Title">Sample Page Title</div>
          </div>
        </mat-toolbar>
      </app-header>
      <!-- SIDEBAR -->
      <videos-sidebar class="aside">
        <div class="aside-inner">
          <nav class="sidebar" sidebar-anyclick-close>
            <div class="nav" id="localTemplateMenu"></div>
          </nav>
          
        </div>
      </videos-sidebar>
      <!-- ./ SIDEBAR -->
      <!-- LANDING -->
      <section class="IE-FlexAuto" flex>
        <div class="content-wrapper">
          <landing-page class="ng-star-inserted">
            <div id="landing">
              <!-- CREATE SHADOW DOM AND ATTACH STYLES -->
              <script>
                landingPageEl = document.querySelector('landing-page').attachShadow({mode: 'open'})
                const landing = landingPageEl.appendChild(document.getElementById('landing'))
                landingPageEl.appendChild(landing)
                const loginPageEl = landingPageEl
              </script>
              <style type="text/css">
                @import url("https://studio304nextechar.freetls.fastly.net/infernoAR/_templates/css/inferno-shadow-styles.css");
              </style>
              <!-- ********************* -->
              <!-- ********************* -->
              <!-- ********************* -->
              <!-- SNIPPET CONTENT START -->
              <inferno-snippet-content id="0b3d41aa-142a-4b3c-bee7-29cbc91dfc42">
									<script type="text/javascript">
										function loadFont(name, url) {
											if (document.fonts.check("1em " + name)) {
												return;
											}
											const fontFace = new FontFace(name, "url(" + url + ")");

											fontFace
												.load()
												.then(function (loadedFont) {
													document.fonts.add(loadedFont);
													console.log("Loaded custom font ", name);
												})
												.catch(function (error) {
													// error occurred
													console.log("Error loading ", name);
												});
										}

										loadFont(
											"Montserrat",
											"https://inferno-event-assets.s3-us-west-2.amazonaws.com/fonts/Montserrat-Regular.ttf"
										);
										loadFont(
											"MontserratBold",
											"https://inferno-event-assets.s3-us-west-2.amazonaws.com/fonts/Montserrat-Bold.ttf"
										);
									</script>

									<style>
										/* prevent entire screen from going black if you try to reference an image that does not exist*/
										/* apparently some style or JS that is setting a style do that somewhere else in the inferno system*/
										img::after {
											content: none;
										}

										.bg-video {
											position: absolute;
											top: 0;
											left: 0%;
											width: auto;
											min-width: 100%;
											height: auto;
											min-height: 100vh;
										}

										#content {
											position: relative;
											margin: -20px;
											min-height: calc(100vh - 114px);
											z-index: 1;
											color: white;
											padding: 2rem;
											display: flex;
											flex-direction: column;
											overflow: hidden;
										}

										.page-contents {
											position: absolute;
											top: 0px;
											left: 0;
											display: flex;
											flex-direction: column;
											justify-content: flex-start;
											align-items: flex-start;
											width: 100%;
											height: 100vh;
											padding-bottom: 8rem;
											overflow-y: scroll;
										}

										.clock {
											position: absolute;
											top: 2rem;
											left: 2rem;
											background-image: url("https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/agenda/agenda_widget.gif");
											width: 59rem;
											height: 35rem;
											font-size: 29px;
											margin-bottom: 2rem;
										}

										.date {
											position: absolute;
											top: 40%;
											left: 2%;
										}

										.date-label,
										.time-label {
											font-size: 16px;
											margin-bottom: -10px;
										}

										.time-box {
											font-size: 41px;
											position: absolute;
											top: 33%;
											right: 8.5%;
											width: 15rem;
											display: flex;
											align-items: center;
											justify-content: center;
											flex-direction: column;
										}

										#agenda {
											width: 100%;
											display: flex;
											flex-direction: column;
											justify-content: space-between;
											font-size: 28px;
											padding: 3rem;
										}

										.agenda-item {
											width: 100%;
											display: flex;
											flex-direction: column;
											align-items: center;
										}

										.agenda-item-main {
											position: relative;
											width: 100%;
											display: flex;
											flex-direction: row;
											flex-wrap: wrap;
											align-items: center;
											justify-content: center;
											min-height: 15rem;
											margin-bottom: 1rem;
										}

										.bookmark {
											display: flex;
											flex-direction: column-reverse;
											align-items: flex-end;
											justify-content: center;
											padding: 1rem 0;
											width: 10rem;
										}

										.button-bookmark {
											cursor: pointer;
											width: 4rem;
											height: 4rem;
											display: flex;
											align-items: center;
											justify-content: center;
											border-radius: 5px;
											font-weight: bold;
											font-size: 4rem;
											position: relative;
										}

										.button-bookmark > svg {
											width: 50px;
											height: 50px;
											right: 10px;
											position: absolute;
										}

										.tooltip-bookmark {
											font-size: 1.2rem;
											background-color: rgba(0, 0, 0, 0.7);
											padding: 1rem;
											border-radius: 5px;
											opacity: 0;
											transition: opacity ease 0.5s;
										}

										.button-bookmark:hover {
											color: #0b42ea;
										}

										.bookmark:hover .tooltip-bookmark {
											opacity: 1;
										}

										.time {
											position: relative;
											background-image: url("https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/agenda/agenda_time_bg.png");
											background-repeat: no-repeat;
											background-size: cover;
											background-position: 97%;
											cursor: pointer;
											position: relative;
											height: 10rem;
											width: 40rem;
											display: flex;
											align-items: center;
											justify-content: center;
											margin-right: 2rem;
											z-index: 5;
										}

										.toggle-tabs {
											display: flex;
											justify-content: space-around;
											margin: 40rem auto 0;
											text-align: center;
											width: 80%;
										}

										.tab {
											background-image: url("https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/agenda/agenda_time_bg.png");
											background-repeat: no-repeat;
											background-size: cover;
											background-position: top;
											background-position-x: -50px;
											cursor: pointer;
											flex: 1;
											height: 50px;
											color: #808080;
											filter: "";
										}

										.tab > p {
											font-size: 18px;
											padding-top: 20px;
										}

										.active {
											color: #ffffff;
											filter: drop-shadow(
												10px 10px 10px rgba(255, 255, 255, 0.7)
											);
										}

										.chevron {
											display: none;
										}

										.chevron::before {
											border-style: solid;
											border-width: 0.15em 0.15em 0 0;
											content: "";
											display: inline-block;
											height: 0.65em;
											left: 0.15em;
											position: relative;
											top: 0.15em;
											transform: rotate(-45deg);
											vertical-align: top;
											width: 0.65em;
										}

										.chevron.bottom:before {
											top: 0;
											transform: rotate(135deg);
										}

										.agenda-title-box {
											position: relative;
											display: flex;
											align-items: center;
											justify-content: space-between;
											flex-wrap: wrap;
											background: linear-gradient(
												rgba(11, 68, 242, 0.3),
												#101010
											);
											width: 60%;
											min-height: 10rem;
											min-width: 40rem;
											padding: 2rem 2em;
										}

										.agenda-title {
											margin-right: 2rem;
										}

										.agenda-item-details {
											display: none;
											margin-bottom: 2rem;
											background: linear-gradient(
												rgba(11, 68, 242, 0.3),
												#101010
											);
											border-radius: 50px;
											width: 90%;
											min-height: 15rem;
											padding: 2rem;
											justify-content: center;
											align-items: center;
										}

										.speaker-image {
											width: 18rem;
											height: auto;
											padding: 1rem;
										}

										.description {
											min-width: 20rem;
										}

										@media screen and (max-width: 1200px) {
											.agenda-item-details {
												flex-direction: column;
											}

											.agenda-item {
												font-size: 2rem;
											}
										}
									</style>

									<div id="content">
										<video class="bg-video" autoplay loop muted playsinline poster="https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/bg-circuit-board-tiny.jpg">
											<source src="https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/bg-circuit-board-small.mp4" type="video/mp4">
										</video>
										<div class="page-contents">
											<div class="clock">
												<div class="date">
													<p class="date-label">Event Date:</p>
													<p>December 12, 2020</p>
												</div>
												<div class="time-box">
													<p class="time-label">Current Time:</p>
													<div class="current-time">10:00</div>
												</div>
											</div>

											<div class="toggle-tabs">
												<div class="event-agenda tab active" id="tab1" onclick="toggleTab(this)">
													<p>Event Agenda</p>
												</div>
												<div class="my-agenda tab" id="tab2" onclick="toggleTab(this)">
													<p>My Agenda</p>
												</div>
											</div>

											<div id="agenda"></div>
										</div>
									</div>

									<template id="template">
										<div class="agenda-item">
											<div class="agenda-item-main">
												<div class="bookmark">
													<div class="button-bookmark" onclick="bookmarkEvent(this)"></div>
													<div class="tooltip-bookmark">
														Save to your Agenda?
													</div>
												</div>
												<div class="time"></div>

												<div class="agenda-title-box">
													<div class="agenda-title"></div>
													<i class="chevron bottom"></i>
												</div>
											</div>
											<div class="agenda-item-details">
												<div class="description"></div>
											</div>
										</div>
									</template>

									<script>
										var bookmarks;
										var parseDate = date => {
											var h = date.getHours();
											var m = date.getMinutes();
											// var ampm = "am";
											// if (h > 12) {
											// 	h = h - 12;
											// 	ampm = "pm";
											// }
											if (m.toString().length < 2) m = "0" + m;

											return h + ":" + m;
										};

										var setTime = () => {
											var d = new Date();

											var currentTimeElement = landingPageEl.querySelector(
												".current-time"
											);
											var currentTime = parseDate(d);
											currentTimeElement.innerHTML = currentTime;

											var t = setTimeout(setTime, 1000);
										};

										setTime();

										var toggleDetails = elem => {
											var agendaItem = landingPageEl.getElementById(
												elem.parentNode.parentNode.id
											);

											var details = agendaItem.querySelector(
												".agenda-item-details"
											);

											details.style.display !== "flex"
												? (details.style.display = "flex")
												: (details.style.display = "none");

											toggleChevron(agendaItem);
										};

										var toggleChevron = element => {
											const chevron = element.querySelector(".chevron");
											chevron.className.includes("bottom")
												? chevron.classList.remove("bottom")
												: chevron.classList.add("bottom");
										};

										var agendaList = [
											{
												id: 13,
												time: "1899-12-30T18:00:00.000Z",
												duration: 15,
												title: "Welcome to TEDxMalmö! - Caroline Ravn",
												dropdown: null,
												speakerImage: null
											},
											{
												id: 13.15,
												time: "1899-12-30T18:15:00.000Z",
												duration: 25,
												title: "TED Talk + Q&A with Per Holknekt",
												dropdown:
													"Per shares emotional and valuable stories from his turbulent life that would makes even the toughest people shed tears. He has gone from being homeless to creating a fortune and a reputation as one of the most loved people in Sweden <br/> <span> <a href='www.facebook.com/per.holknekt' target='__blank'>www.facebook.com/per.holknekt'</a></span>, <span> <a href='https://www.instagram.com/extraknekt/' target='__blank'>https://www.instagram.com/extraknekt</a></span>",
												speakerImage:
													"https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/speakers/Per Holknekt 3.png"
											},
											{
												id: 13.4,
												time: "1899-12-30T18:40:00.000Z",
												duration: 25,
												title: "TED Talk with Atrium Ljungberg",
												dropdown:
													"“Building for moments you never forget.” With a career in commercial real estate and city development, Andreas explores the role of cities and communities in the time after the pandemic. How can commercial property development achieve moments in life that also defines a city. <br/> <span> <a href='https://www.al.se/' target='__blank'>https://www.al.se</a></span> #cityinnovation #culture #placemaking",
												speakerImage:
													"https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/speakers/Andreas.png"
											},
											{
												id: 14.05,
												time: "1899-12-30T19:05:00.000Z",
												duration: 20,
												title: "RWE renewables  MASTER CLASS",
												dropdown:
													"Shaping the future of energy together. <span><a href='https://www.group.rwe/' target='__blank'>https://www.group.rwe</a></span>  #greenenergy #future",
												speakerImage:
													"https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/speakers/RWE.png"
											},
											{
												id: 14.25,
												time: "1899-12-30T19:25:00.000Z",
												duration: 15,
												title: "Kami Compliance MASTER CLASS",
												dropdown:
													"Kami Compliance is a data privacy consultancy firm specialising in the General Data Protection Regulation (GDPR) <span> <a href='http://www.consultkami.com/' target='__blank'>http://www.consultkami.com</a></span> #knowyourrights #data",
												speakerImage:
													"https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/speakers/Kami.png"
											},
											{
												id: 14.4,
												time: "1899-12-30T19:40:00.000Z",
												duration: 15,
												title:
													"Learn magic from Caroline and go see what the platform can do.",
												dropdown: null,
												speakerImage: null
											},
											{
												id: 14.55,
												time: "1899-12-30T19:55:00.000Z",
												duration: 20,
												title: "TED Talk with Wim Hof",
												dropdown:
													"Famously known as the Ice man because can handle extreme cold, and we mean EXTREME! Wim Hof has claimed 27 world records such as running the world’s fastest halfmarathon while barefoot on ice or snow. <span> <a href='https://www.wimhofmethod.com/' target='__blank'>https://www.wimhofmethod.com</a></span> #selfdevelopment #inflammation",
												speakerImage:
													"https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/speakers/Wim-Hof.png"
											},
											{
												id: 15.15,
												time: "1899-12-30T20:15:00.000Z",
												duration: 20,
												title: "King MASTER CLASS",
												dropdown:
													"King is a leading interactive entertainment company for the mobile world, with people all around the world playing one or more of our games. We have developed more than 200 fun titles, offering games that are enjoyed all around the world. <span> <a href='https://www.king.com/' target='__blank'>https://www.king.com<a/></span> #innovation #creativity #teams",
												speakerImage:
													"https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/speakers/King.png"
											},
											{
												id: 15.35,
												time: "1899-12-30T20:35:00.000Z",
												duration: 20,
												title: "Q&A with Saga Gardevärn (Founder of TEDxMalmö)",
												dropdown:
													'"Is this the end for TEDxMalmö? ABSOLUTELY NOT!!!”\nCovid-19, lockdowns or money shortage… Nothing faces the Founder of TEDxMalmö, who transformed from creating the largest physical event in TEDx history, to a totally immersive and virtual experience with all the bells and whistles. Saga Gardevärn will answer all your questions about how to adapt in a highly unstable environment, allowing yourself to learn as you go, and most importantly never, ever give up!"',
												speakerImage:
													"https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/speakers/Saga.png"
											},

											{
												id: 15.55,
												time: "1899-12-30T20:55:00.000Z",
												duration: 20,
												title: "Jävligt Gott MASTER CLASS",
												dropdown:
													"Jävligt Gott is Sweden's largest vegan food blog. Here, Gustav Johansson writes about what he considers to be damn good food, and his attempts to cook it.  <span> <a href='https://www.javligtgott.se/' target='__blank'>https://www.javligtgott.se</a></span>  #cookalong #futurefood",
												speakerImage:
													"https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/speakers/JavGott.png"
											},

											{
												id: 16.2,
												time: "1899-12-30T21:15:00.000Z",
												duration: 20,
												title: "TED Talk with Robert Swan",
												dropdown:
													"Robert is the first person in history to have walked to both the North and South Poles. He is an explorer, a leader in energy innovation, and the founder of the 2041 Foundation, a non-profit dedicated to preserving Antarctica as a natural reserve, land for science and peace. <span> <a href='https://2041foundation.org/robert-swan/' target='__blank'>https://2041foundation.org/robert-swan</a></span>",
												speakerImage:
													"https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/speakers/Robert Swan.png"
											},

                      {
                        id: 16.35,
                        time: "1899-12-30T21:35:00.000Z",
                        duration: 10,
                        title: "Break",
                        dropdown: null,
                        speakerImage: null,
                      },

											{
												id: 16.45,
												time: "1899-12-30T21:45:00.000Z",
												duration: 20,
												title: "TED Talk + Q&A with Heather Mills",
												dropdown:
													"This strong woman has went through it all. For example, a leg amputation plus a modelling career with a prosthetic limb. Her message is as simple as it is clear: never give up <br/> <span> <a href='https://www.heathermills.org/' target='__blank'>https://www.heathermills.org</a></span>",
												speakerImage:
													"https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/speakers/HEATHER MILLS 2.png"
											},

											{
												id: 17.1,
												time: "1899-12-30T22:10:00.000Z",
												duration: 10,
												title: "Vimentis (Michel Laporte Godorn)  MASTER CLASS",
												dropdown:
													"Vimentis Group AB is a complete sales company <span> <a href='https://www.vimentis.se/' target='__blank'>https://vimentis.se<a/></span> #sales",
												speakerImage:
													"https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/speakers/vimentis.png"
											},

                      {
                        id: 17.2,
                        time: "1899-12-30T22:20:00.000Z",
                        duration: 10,
                        title: "TED Talk with Janne Bjorge",
                        dropdown:
                          null,
                        speakerImage:
                          null,
                      },

                      {
                      id: 17.3,
                      time: "1899-12-30T22:30:00.000Z",
                      duration: 10,
                      title: "Break",
                      dropdown:
                    null,
                      speakerImage:
                    null,
                    },

											{
												id: 17.4,
												time: "1899-12-30T22:40:00.000Z",
												duration: 20,
                        title: "TED Talk with Bruce Dickinson",
												dropdown:
                          "Band leader fronting one of the world's largest metal bands, and entrepreneur, author and business man. <span> <a href='https://screamforme.com/' target='__blank'>https://screamforme.com</a></span>",
												speakerImage:
                          "https://inferno-event-assets.s3-us-west-2.amazonaws.com/tedxmalmo/speakers/BRUCE DICKINSON.png"
											},

											{
												id: 18,
												time: "1899-12-30T23:00:00.000Z",
                        duration: 10,
                        title: "Goodbye from your host Caroline Ravn!",
                        dropdown: null,
                        speakerImage: null
											},
										];

										var convertTime = (start, duration) => {
											if (!start || !duration) return "TBD";
											var startDate = new Date(start);
											var endDate = new Date(
												startDate.getTime() + duration * 60000
											);

											return parseDate(startDate) + " - " + parseDate(endDate);
										};

										//For dev purposes only.  Clears the bookmark data to make sure the values are clean
										//Remove for testing a go live
										var deleteBookmarks = () => {
											const url =
												"https://ingress.infernocore.jolokia.com/api/CustomUserDataStore/ByKey/bookmarks";
											const bearerToken = window.sessionStorage.getItem(
												"token"
											);
											const bearer = "Bearer " + bearerToken;
											return fetch(url, {
												method: "DELETE",
												withCredentials: true,
												headers: {
													Authorization: bearer
												}
											});
										};

										var fetchUserData = () => {
											const url =
												"https://ingress.infernocore.jolokia.com/api/CustomUserDataStore/ByKey/bookmarks";
											const bearerToken = window.sessionStorage.getItem(
												"token"
											);
											const bearer = "Bearer " + bearerToken;
											return fetch(url, {
												method: "GET",
												withCredentials: true,
												headers: {
													Authorization: bearer
												}
											});
										};

										var getBookmarks = async () => {
											bookmarks = [];
											try {
												const res = await fetchUserData();
												if (res.status === 200) {
													const json = await res.json();
													bookmarks = JSON.parse(json.value);
												}
											} catch (e) {
												throw new Error(e);
											}

											buildEventList();
										};

										//send bookmarks to API
										var sendBookmarks = (bookmark, actionType) => {
											if (bookmark) {
												let url =
													"https://ingress.infernocore.jolokia.com/api/CustomUserDataStore";
												let method = "POST";
												let value;
												//if bookmark kvp exists, set method to 'PUT'
												if (bookmarks.length > 0) method = "PUT";

												if (actionType === "add") {
													bookmarks.push(bookmark);
												} else {
													bookmarks = bookmarks.filter(
														item => item.id !== bookmark.id
													);

													if (bookmarks.length < 1) {
														method = "DELETE";
														url =
															"https://ingress.infernocore.jolokia.com/api/CustomUserDataStore/ByKey/bookmarks";
													}
												}

												const kvp = {
													key: "bookmarks",
													value: JSON.stringify(bookmarks),
													public: true
												};

												const bearerToken = window.sessionStorage.getItem(
													"token"
												);
												const bearer = "Bearer " + bearerToken;

												let headers = new Headers();
												headers.set("Authorization", bearer);
												headers.set("Accept", "application/json");
												headers.set("Content-Type", "application/json");

												const overrideId = window.sessionStorage.getItem(
													"overrideId"
												);
												if (overrideId)
													headers.set("X-Client-Override", overrideId);

												fetch(url, {
													method: method,
													withCredentials: true,
													headers: headers,
													body: JSON.stringify(kvp)
												});
											}
										};

										var buildEventList = () => {
											//for dev purposes only.  remove for testing and go live
											deleteBookmarks();

											const agenda = landingPageEl.getElementById("agenda");
											const template = landingPageEl.getElementById("template");
											agenda.innerHTML = "";

											agendaList.sort((a, b) => (a.id > b.id ? 1 : -1));

											agendaList.forEach(item => {
												const clone = template.content.cloneNode(true);
												let time = clone.querySelector(".time");
												let agendaItem = clone.querySelector(".agenda-item");
												let bookmarkButton = clone.querySelector(
													".button-bookmark"
												);

												let title = clone.querySelector(".agenda-title");

												let description = clone.querySelector(".description");

												const id = item.id;

												//set bookmarked event button display
												if (
													bookmarks.some(bookmark => bookmark.id === item.id)
												) {
													let tooltip = clone.querySelector(
														".tooltip-bookmark"
													);
													tooltip.innerHTML = "Remove from your agenda?";
													bookmarkButton.innerHTML =
														'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" fill="#ffffff" viewBox="0 0 100 100" xml:space="preserve"><path d="M24,58h32v6H24V58z M62,58v6h18v-6H62z M64,46H24v6h40V46z M64,34H24v6h40V34z"></path></svg>';
												} else
													bookmarkButton.innerHTML =
														'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" fill="#ffffff" viewBox="0 0 100 100" xml:space="preserve"><path d="M24,58h32v6H24V58z M82,58h-8v-8h-6v8h-8v6h8v8h6v-8h8V58z M64,46H24v6h40V46z M64,34H24v6h40V34z"></path></svg>';

												time.innerHTML = convertTime(item.time, item.duration);
												title.innerHTML = item.title;
												//if dropdown text exists, add onclick functionality and show chevron
												if (item.dropdown) {
													description.innerHTML = item.dropdown;
													time.style.cursor = "pointer";
													time.setAttribute("onclick", "toggleDetails(this)");

													var titleBox = clone.querySelector(
														".agenda-title-box"
													);
													titleBox.style.cursor = "pointer";
													titleBox.setAttribute(
														"onclick",
														"toggleDetails(this)"
													);

													var chevron = clone.querySelector(".chevron");
													chevron.style.display = "block";
												}

												let agendaDetails = clone.querySelector(
													".agenda-item-details"
												);

												if (item.speakerImage) {
													let imgElement = document.createElement("img");
													imgElement.setAttribute("class", "speaker-image");
													imgElement.src = item.speakerImage;
													agendaDetails.prepend(imgElement);
												}

												agendaItem.setAttribute("id", id);
												agenda.appendChild(clone);
											});
										};

										var bookmarkEvent = button => {
											var id = button.parentNode.parentNode.parentNode.id;
											var tooltip = button.parentNode.querySelector(
												".tooltip-bookmark"
											);

											const tab1 = landingPageEl.querySelector("#tab1");
											const tab2 = landingPageEl.querySelector("#tab2");

											var savedItem = agendaList.filter(item => item.id == id);

											if (
												button.innerHTML.trim() ==
												'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" fill="#ffffff" viewBox="0 0 100 100" xml:space="preserve"><path d="M24,58h32v6H24V58z M82,58h-8v-8h-6v8h-8v6h8v8h6v-8h8V58z M64,46H24v6h40V46z M64,34H24v6h40V34z"></path></svg>'
											) {
												//add agenda item
												sendBookmarks(savedItem[0], "add");
												button.innerHTML =
													'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" fill="#ffffff" viewBox="0 0 100 100" xml:space="preserve"><path d="M24,58h32v6H24V58z M62,58v6h18v-6H62z M64,46H24v6h40V46z M64,34H24v6h40V34z"></path></svg>';
												tooltip.innerHTML = "Remove from your agenda?";
											} else {
												//remove agenda item
												sendBookmarks(savedItem[0], "remove");
												button.innerHTML =
													'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" fill="#ffffff" viewBox="0 0 100 100" xml:space="preserve"><path d="M24,58h32v6H24V58z M82,58h-8v-8h-6v8h-8v6h8v8h6v-8h8V58z M64,46H24v6h40V46z M64,34H24v6h40V34z"></path></svg>';
												tooltip.innerHTML = "Add to your agenda?";

												if (tab2.classList.contains("active")) {
													var event = landingPageEl.getElementById(id);
													event.remove();
												}
											}
										};

										function toggleTab(tab) {
											var bookmarkCopy = bookmarks;
											var agendaListCopy = agendaList;
											tabId = tab.id;
											const tab1 = landingPageEl.querySelector("#tab1");
											const tab2 = landingPageEl.querySelector("#tab2");
											if (!tab.classList.contains("active")) {
												if (tabId === "tab1") {
													tab1.classList.add("active");
													tab2.classList.remove("active");
													agendaList = agendaListCopy;
												} else {
													tab1.classList.remove("active");
													tab2.classList.add("active");
													agendaList = bookmarkCopy;
												}

												buildEventList();

												bookmarks = bookmarkCopy;
												agendaList = agendaListCopy;
											}
										}

										getBookmarks();
									</script>

									<!-- Chatwee -->
									<chatwee>
										<script>
											var fetchGlobalSnippet = snippetId => {
												// Set header
												const headers = {
													Authorization:
														"Bearer " + sessionStorage.getItem("token"),
													"X-InfernoCore-Domain":
														sessionStorage.getItem("domain") ??
														window.location.hostname
												};

												// add a header property for users accessing with SA credentials
												if (window.sessionStorage.overrideId) {
													headers["X-InfernoCore-Domain"] =
														"jolokia.inferno.jolokia.com";
													headers["X-Client-Override"] = sessionStorage.getItem(
														"overrideId"
													);
												}

												let globalSnippet = null;

												$.ajax({
													url:
														"https://ingress.infernocore.jolokia.com/api/Snippets/LatestRevisionHTML/" +
														snippetId,
													type: "GET",
													async: false,
													accept: "application/json",
													contentType: "application/json",
													headers: headers,
													success: function (res, status, xhr) {
														const parser = new DOMParser();
														globalSnippet = parser.parseFromString(
															res,
															"text/html"
														);
													},
													error: function (err) {
														console.error("Error Fetching Global Snippet", err);
													}
												});

												return globalSnippet;
											};

											if (!window.chatManager) {
												var snippetId = "bfc4e244-d9ac-4da5-ac9c-8a7c1039e540";
												var chatweeSnippet = fetchGlobalSnippet(snippetId);
												var username = chatweeSnippet.getElementById(
													"inferno-username"
												);
												var script = chatweeSnippet.getElementById(
													"chatweeLogic"
												);
												//checks if the elements have already been inserted into the DOM to avoid duplicate elements
												if (!landingPageEl.getElementById("inferno-username")) {
													landingPageEl.appendChild(username);
												}
												// eval the script so it will be executed here
												eval(script.innerHTML);
											}
										</script>
									</chatwee>
								</inferno-snippet-content>
              <!--  SNIPPET CONTENT END  -->
              <!-- ********************* -->
              <!-- ********************* -->
              <!-- ********************* -->
            </div>
          </landing-page>
        </div>
      </section>
      <!-- LANDING -->
      <!-- FOOTER -->
      <footer app-footer layout="row" layout-align="start center">
        Inferno Footer
      </footer>
      <!-- ./ FOOTER -->
    </div>
  </videos-layout>
</app-root>




<script>

  // LIQUID PROCESSING (Set the data variable above)
  function processLiquid() {
    return new Promise((resolve, reject) => {
      console.log('PROCESSING LIQUID')
      // We rip the entire content of the inferno-snippet-content element. InnerHTML returns certain characters such as < and > escaped.
      // This breaks comparison operators, so we need to convert them back before Liquid processing.
      const template = landingPageEl.querySelector('inferno-snippet-content').innerHTML.replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&amp;/g, '&')
      // Select the element itself to replace the content
      const result = landingPageEl.querySelector('inferno-snippet-content')
      // Initialize the parsing engine
      const engine = new liquidjs.Liquid()
      // Parse and render
      engine.parseAndRender(template, {data}).then(html => result.innerHTML = html)
      resolve()
    })

  }

  // Set the menu initial state here: 'expanded', 'collapsed', or 'hidden'.
  function mtCollapseMenu() {
    const appRoot = document.querySelector('app-root')
    const sideBar = document.querySelector('videos-sidebar')
    window.sessionStorage.setItem('menuState', 'collapsed')
    appRoot.classList.add('aside-collapsed')
    appRoot.classList.remove('aside-hidden')
    sideBar.classList.remove('hidden')
  }

  function mtHideMenu() {
    const appRoot = document.querySelector('app-root')
    const sideBar = document.querySelector('videos-sidebar')
    window.sessionStorage.setItem('menuState', 'hidden')
    appRoot.classList.remove('aside-collapsed')
    appRoot.classList.add('aside-hidden')
    sideBar.classList.add('hidden')
  }

  function mtExpandMenu() {
    const appRoot = document.querySelector('app-root')
    const sideBar = document.querySelector('videos-sidebar')
    window.sessionStorage.setItem('menuState', 'expanded')
    appRoot.classList.remove('aside-hidden')
    appRoot.classList.remove('aside-collapsed')
    sideBar.classList.remove('hidden')
  }

  function mtTriggerMenu() {
    const appRoot = document.querySelector('app-root')
    const sideBar = document.querySelector('videos-sidebar')
    if (!appRoot.classList.contains('aside-collapsed') && !appRoot.classList.contains('aside-hidden')) {
      mtCollapseMenu()
    } else if (appRoot.classList.contains('aside-collapsed') && !appRoot.classList.contains('aside-hidden')) {
      mtHideMenu()
    } else if (appRoot.classList.contains('aside-hidden')) {
      mtExpandMenu()
    }
  }

  function mtInitMenu() {
    const appRoot = document.querySelector('app-root')
    const sideBar = document.querySelector('videos-sidebar')
    const state = sessionStorage.getItem('menuState')

    if (state === 'collapsed') {
      mtCollapseMenu()
    } else if (state === 'hidden') {
      mtHideMenu()
    } else if (state === 'expanded') {
      mtExpandMenu()
    }
  }

  function populateInfernoElements() {
    const qaDiv = landingPageEl.querySelector('#inferno-questions-basic')
    const videoDiv = landingPageEl.querySelector('#inferno-video-player')
    if (qaDiv) {
      $(qaDiv).append(`
      <questions _nghost-qch-c20="">
        <div class="ng-untouched ng-pristine ng-valid ng-star-inserted">
          <div class="inferno-input-group">
            <span class="inferno-input-group-addon">Ask A Question</span>
            <input class="inferno-form-control ng-untouched ng-pristine ng-valid" type="text">
            <span class="inferno-input-group-btn">
              <button class="inferno-btn" type="button">Submit</button>
            </span>
          </div>
        </div>
      </questions>
      `)
    }
    if (videoDiv) {
      $(videoDiv).append(`
        <iframe src="https://jolokia.inferno.jolokia.com/embed/ecd7f4ad-2c0a-4f3f-bfd6-37670cc2edbd"
          width="640"
          height="360"
          frameborder="0"
          allowfullscreen">
        </iframe>
        `)
    }
  }

  // Wait for liquid processing before handling the rest
  if (data) {
    processLiquid().then(mtInitMenu).then(populateInfernoElements)
  } else {
    mtInitMenu()
    populateInfernoElements()
  }

</script>



</body><!-- Menu Collapse Script -->
